{"version":3,"sources":["D:\\Tech Vitta\\Apps\\DEMO\\lib\\localStorage.js"],"sourcesContent":["// Helper functions for localStorage operations\r\n\r\nexport function getCurrentUser() {\r\n  if (typeof window === 'undefined') return null;\r\n  \r\n  try {\r\n    const user = localStorage.getItem('currentUser');\r\n    return user ? JSON.parse(user) : null;\r\n  } catch (error) {\r\n    // Error reading current user (silent in production)\r\n    return null;\r\n  }\r\n}\r\n\r\nexport function setCurrentUser(user) {\r\n  if (typeof window === 'undefined') return;\r\n  \r\n  try {\r\n    localStorage.setItem('currentUser', JSON.stringify(user));\r\n  } catch (error) {\r\n    // Error saving current user (silent in production)\r\n    if (error.name === 'QuotaExceededError') {\r\n      alert('Storage quota exceeded. Please clear some data.');\r\n    }\r\n  }\r\n}\r\n\r\nexport function getAllUsers() {\r\n  if (typeof window === 'undefined') return [];\r\n  \r\n  try {\r\n    const users = localStorage.getItem('allUsers');\r\n    return users ? JSON.parse(users) : [];\r\n  } catch (error) {\r\n    // Error reading all users (silent in production)\r\n    return [];\r\n  }\r\n}\r\n\r\nexport function setAllUsers(users) {\r\n  if (typeof window === 'undefined') return;\r\n  \r\n  try {\r\n    localStorage.setItem('allUsers', JSON.stringify(users));\r\n  } catch (error) {\r\n    // Error saving all users (silent in production)\r\n  }\r\n}\r\n\r\nexport function getMatches() {\r\n  if (typeof window === 'undefined') return [];\r\n  \r\n  try {\r\n    const matches = localStorage.getItem('matches');\r\n    return matches ? JSON.parse(matches) : [];\r\n  } catch (error) {\r\n    // Error reading matches (silent in production)\r\n    return [];\r\n  }\r\n}\r\n\r\nexport function setMatches(matches) {\r\n  if (typeof window === 'undefined') return;\r\n  \r\n  try {\r\n    localStorage.setItem('matches', JSON.stringify(matches));\r\n  } catch (error) {\r\n    // Error saving matches (silent in production)\r\n  }\r\n}\r\n\r\nexport function getConversations() {\r\n  if (typeof window === 'undefined') return {};\r\n  \r\n  try {\r\n    const convos = localStorage.getItem('conversations');\r\n    return convos ? JSON.parse(convos) : {};\r\n  } catch (error) {\r\n    // Error reading conversations (silent in production)\r\n    return {};\r\n  }\r\n}\r\n\r\nexport function setConversations(conversations) {\r\n  if (typeof window === 'undefined') return;\r\n  \r\n  try {\r\n    localStorage.setItem('conversations', JSON.stringify(conversations));\r\n  } catch (error) {\r\n    // Error saving conversations (silent in production)\r\n  }\r\n}\r\n\r\n/**\r\n * Clear all stored message data\r\n */\r\nexport function clearConversations() {\r\n  if (typeof window === 'undefined') return;\r\n  \r\n  try {\r\n    localStorage.removeItem('conversations');\r\n  } catch (error) {\r\n    // Error clearing conversations (silent in production)\r\n  }\r\n}\r\n\r\n/**\r\n * Clear all conversations data - removes message history\r\n */\r\nexport function clearAllConversations() {\r\n  if (typeof window === 'undefined') return;\r\n  \r\n  try {\r\n    localStorage.removeItem('conversations');\r\n    return true;\r\n  } catch (error) {\r\n    console.error('Error clearing all conversations:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\nexport function getUserActions() {\r\n  if (typeof window === 'undefined') return { likes: [], passes: [] };\r\n  \r\n  try {\r\n    const actions = localStorage.getItem('userActions');\r\n    return actions ? JSON.parse(actions) : { likes: [], passes: [] };\r\n  } catch (error) {\r\n    console.error('Error reading user actions:', error);\r\n    return { likes: [], passes: [] };\r\n  }\r\n}\r\n\r\nexport function setUserActions(actions) {\r\n  if (typeof window === 'undefined') return;\r\n  \r\n  try {\r\n    localStorage.setItem('userActions', JSON.stringify(actions));\r\n  } catch (error) {\r\n    console.error('Error saving user actions:', error);\r\n  }\r\n}\r\n\r\n/**\r\n * Get all likes from user actions\r\n */\r\nexport function getLikes() {\r\n  const actions = getUserActions();\r\n  return actions.likes || [];\r\n}\r\n\r\n/**\r\n * Get all messages from conversations\r\n */\r\nexport function getMessages() {\r\n  const conversations = getConversations();\r\n  return Object.values(conversations) || [];\r\n}\r\n\r\nexport function addLike(userId) {\r\n  const actions = getUserActions();\r\n  if (!actions.likes.includes(userId)) {\r\n    actions.likes.push(userId);\r\n    setUserActions(actions);\r\n  }\r\n}\r\n\r\nexport function addPass(userId) {\r\n  const actions = getUserActions();\r\n  if (!actions.passes.includes(userId)) {\r\n    actions.passes.push(userId);\r\n    setUserActions(actions);\r\n  }\r\n}\r\n\r\nexport function isLiked(userId) {\r\n  const actions = getUserActions();\r\n  return actions.likes.includes(userId);\r\n}\r\n\r\nexport function isPassed(userId) {\r\n  const actions = getUserActions();\r\n  return actions.passes.includes(userId);\r\n}\r\n\r\nexport function clearCurrentUser() {\r\n  if (typeof window === 'undefined') return;\r\n  \r\n  // Only clear the current user session, keep all other data (chats, matches, etc.)\r\n  localStorage.removeItem('currentUser');\r\n}\r\n\r\nexport function clearAllData() {\r\n  if (typeof window === 'undefined') return;\r\n  \r\n  // Clear everything - only use this for complete reset\r\n  localStorage.removeItem('currentUser');\r\n  localStorage.removeItem('allUsers');\r\n  localStorage.removeItem('matches');\r\n  localStorage.removeItem('conversations');\r\n  localStorage.removeItem('userActions');\r\n}\r\n\r\nexport function checkStorageSupport() {\r\n  if (typeof window === 'undefined') return false;\r\n  \r\n  try {\r\n    const test = '__storage_test__';\r\n    localStorage.setItem(test, test);\r\n    localStorage.removeItem(test);\r\n    return true;\r\n  } catch (error) {\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * Update a user's password by name or email\r\n * @param {string} identifier - User's name or email\r\n * @param {string} newPassword - New password to set\r\n * @returns {boolean} - True if password was updated, false otherwise\r\n */\r\nexport function updateUserPasswordByIdentifier(identifier, newPassword) {\r\n  if (typeof window === 'undefined') return false;\r\n  \r\n  try {\r\n    const allUsers = getAllUsers();\r\n    const identifierLower = identifier.toLowerCase();\r\n    \r\n    // Find user by name or email (case-insensitive)\r\n    const userIndex = allUsers.findIndex(u => \r\n      u.name?.toLowerCase().includes(identifierLower) || \r\n      u.email?.toLowerCase().includes(identifierLower)\r\n    );\r\n    \r\n    if (userIndex === -1) {\r\n      console.error(`User not found: ${identifier}`);\r\n      return false;\r\n    }\r\n    \r\n    // Update password\r\n    allUsers[userIndex].password = newPassword;\r\n    setAllUsers(allUsers);\r\n    \r\n    return true;\r\n  } catch (error) {\r\n    console.error('Error updating user password:', error);\r\n    return false;\r\n  }\r\n}\r\n"],"names":["addLike","addPass","checkStorageSupport","clearAllConversations","clearAllData","clearConversations","clearCurrentUser","getAllUsers","getConversations","getCurrentUser","getLikes","getMatches","getMessages","getUserActions","isLiked","isPassed","setAllUsers","setConversations","setCurrentUser","setMatches","setUserActions","updateUserPasswordByIdentifier","window","user","localStorage","getItem","JSON","parse","error","setItem","stringify","name","alert","users","matches","convos","conversations","removeItem","console","likes","passes","actions","Object","values","userId","includes","push","test","identifier","newPassword","allUsers","identifierLower","toLowerCase","userIndex","findIndex","u","email","password"],"mappings":"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"}