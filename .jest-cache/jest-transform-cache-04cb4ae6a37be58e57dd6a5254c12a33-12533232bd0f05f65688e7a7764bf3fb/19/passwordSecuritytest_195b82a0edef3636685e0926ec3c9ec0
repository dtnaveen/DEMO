37acf5de99a45406037c9ad10c646fc8
/**
 * Password Security Tests
 * Tests for password hashing, verification, and rate limiting
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _passwordSecurity = require("../../lib/passwordSecurity.js");
// Crypto is mocked in jest.setup.js, but we need to re-implement it in beforeEach
// because Jest's resetMocks clears the implementations
const cryptoHashStore = new Map();
// Mock localStorage for rate limiter tests
let rateLimiterStore = {};
const rateLimiterLocalStorage = {
    getItem: jest.fn((key)=>{
        return rateLimiterStore[key] || null;
    }),
    setItem: jest.fn((key, value)=>{
        rateLimiterStore[key] = value.toString();
    }),
    removeItem: jest.fn((key)=>{
        delete rateLimiterStore[key];
    }),
    clear: jest.fn(()=>{
        rateLimiterStore = {};
    })
};
// Ensure window exists
if (typeof window === 'undefined') {
    global.window = {};
}
beforeEach(()=>{
    // Reset rate limiter store
    rateLimiterStore = {};
    // Re-implement localStorage mocks for rate limiter
    rateLimiterLocalStorage.getItem.mockImplementation((key)=>{
        return rateLimiterStore[key] || null;
    });
    rateLimiterLocalStorage.setItem.mockImplementation((key, value)=>{
        rateLimiterStore[key] = value.toString();
    });
    rateLimiterLocalStorage.removeItem.mockImplementation((key)=>{
        delete rateLimiterStore[key];
    });
    rateLimiterLocalStorage.clear.mockImplementation(()=>{
        rateLimiterStore = {};
    });
    // Set up localStorage for rate limiter
    Object.defineProperty(window, 'localStorage', {
        value: rateLimiterLocalStorage,
        writable: true,
        configurable: true
    });
    global.localStorage = rateLimiterLocalStorage;
    // Ensure crypto is set up (Jest's resetMocks might clear it)
    if (!global.crypto) {
        global.crypto = {};
    }
    if (!global.crypto.subtle) {
        global.crypto.subtle = {};
    }
    // Re-implement crypto mocks (Jest's resetMocks might clear them)
    global.crypto.getRandomValues = (arr)=>{
        for(let i = 0; i < arr.length; i++){
            arr[i] = i * 17 % 256;
        }
        return arr;
    };
    // Store password data with keyMaterial for hash generation
    const passwordDataMap = new WeakMap();
    global.crypto.subtle.importKey = jest.fn().mockImplementation(async (format, keyData, algorithm, extractable, keyUsages)=>{
        // Store the password data (keyData is the password bytes) with the returned keyMaterial
        const keyMaterial = {
            format,
            algorithm,
            extractable,
            keyUsages,
            _passwordData: new Uint8Array(keyData) // Store password bytes for hash generation
        };
        passwordDataMap.set(keyMaterial, keyData);
        return keyMaterial;
    });
    global.crypto.subtle.deriveBits = jest.fn().mockImplementation(async (algorithm, keyMaterial, length)=>{
        // Create a consistent hash based on salt AND password
        const saltHex = Array.from(algorithm.salt).map((b)=>b.toString(16).padStart(2, '0')).join('');
        // Get password data from keyMaterial
        let passwordHash = 0;
        if (keyMaterial && keyMaterial._passwordData) {
            const passwordBytes = keyMaterial._passwordData;
            for(let i = 0; i < Math.min(passwordBytes.length, 20); i++){
                passwordHash = (passwordHash * 31 + passwordBytes[i]) % 1000000;
            }
        }
        const key = `${saltHex}-${length}-${passwordHash}`;
        if (!cryptoHashStore.has(key)) {
            // Generate a predictable hash based on salt and password
            const hash = new Uint8Array(length / 8);
            for(let i = 0; i < hash.length; i++){
                hash[i] = (i * 7 + saltHex.charCodeAt(i % saltHex.length) + passwordHash) % 256;
            }
            cryptoHashStore.set(key, hash.buffer);
        }
        return cryptoHashStore.get(key);
    });
    // Clear hash store between tests
    cryptoHashStore.clear();
});
describe('Password Security', ()=>{
    describe('hashPassword', ()=>{
        it('should hash a password successfully', async ()=>{
            const password = 'TestPassword123';
            const hash = await (0, _passwordSecurity.hashPassword)(password);
            expect(hash).toBeDefined();
            expect(typeof hash).toBe('string');
            expect(hash.includes(':')).toBe(true);
        });
        it('should throw error for empty password', async ()=>{
            await expect((0, _passwordSecurity.hashPassword)('')).rejects.toThrow();
        });
        it('should throw error for non-string password', async ()=>{
            await expect((0, _passwordSecurity.hashPassword)(null)).rejects.toThrow();
            await expect((0, _passwordSecurity.hashPassword)(123)).rejects.toThrow();
        });
    });
    describe('verifyPassword', ()=>{
        it('should verify correct password', async ()=>{
            const password = 'TestPassword123';
            const hash = await (0, _passwordSecurity.hashPassword)(password);
            const isValid = await (0, _passwordSecurity.verifyPassword)(password, hash);
            expect(isValid).toBe(true);
        });
        it('should reject incorrect password', async ()=>{
            const password = 'TestPassword123';
            const hash = await (0, _passwordSecurity.hashPassword)(password);
            const isValid = await (0, _passwordSecurity.verifyPassword)('WrongPassword', hash);
            expect(isValid).toBe(false);
        });
        it('should handle plain text passwords (backward compatibility)', async ()=>{
            const password = 'plaintext123';
            const isValid = await (0, _passwordSecurity.verifyPassword)(password, password);
            expect(isValid).toBe(true);
        });
        it('should return false for empty inputs', async ()=>{
            expect(await (0, _passwordSecurity.verifyPassword)('', 'hash')).toBe(false);
            expect(await (0, _passwordSecurity.verifyPassword)('password', '')).toBe(false);
            expect(await (0, _passwordSecurity.verifyPassword)('', '')).toBe(false);
        });
    });
    describe('validatePasswordStrength', ()=>{
        it('should accept strong passwords', ()=>{
            const result = (0, _passwordSecurity.validatePasswordStrength)('StrongPass123');
            expect(result.isValid).toBe(true);
        });
        it('should reject passwords shorter than 8 characters', ()=>{
            const result = (0, _passwordSecurity.validatePasswordStrength)('Short1');
            expect(result.isValid).toBe(false);
            expect(result.message).toContain('8 characters');
        });
        it('should reject passwords without numbers', ()=>{
            const result = (0, _passwordSecurity.validatePasswordStrength)('NoNumbers');
            expect(result.isValid).toBe(false);
            expect(result.message).toContain('number');
        });
        it('should reject passwords without letters', ()=>{
            const result = (0, _passwordSecurity.validatePasswordStrength)('12345678');
            expect(result.isValid).toBe(false);
            expect(result.message).toContain('letter');
        });
        it('should reject passwords longer than 128 characters', ()=>{
            const longPassword = 'a'.repeat(129) + '1';
            const result = (0, _passwordSecurity.validatePasswordStrength)(longPassword);
            expect(result.isValid).toBe(false);
            expect(result.message).toContain('128 characters');
        });
        it('should reject empty passwords', ()=>{
            const result = (0, _passwordSecurity.validatePasswordStrength)('');
            expect(result.isValid).toBe(false);
            expect(result.message).toContain('required');
        });
    });
    describe('isSecureHash', ()=>{
        it('should identify secure hash format', ()=>{
            expect((0, _passwordSecurity.isSecureHash)('salt:hash')).toBe(true);
            expect((0, _passwordSecurity.isSecureHash)('abc123:def456')).toBe(true);
        });
        it('should reject plain text as secure hash', ()=>{
            expect((0, _passwordSecurity.isSecureHash)('plaintext')).toBe(false);
            expect((0, _passwordSecurity.isSecureHash)('password123')).toBe(false);
        });
        it('should handle invalid formats', ()=>{
            expect((0, _passwordSecurity.isSecureHash)('')).toBe(false);
            expect((0, _passwordSecurity.isSecureHash)(null)).toBe(false);
            expect((0, _passwordSecurity.isSecureHash)('onlysalt:')).toBe(false);
            expect((0, _passwordSecurity.isSecureHash)(':onlyhash')).toBe(false);
        });
    });
    describe('LoginRateLimiter', ()=>{
        beforeEach(()=>{
            // Clear rate limiter state
            if (typeof window !== 'undefined') {
                localStorage.removeItem('login_attempts');
            }
            _passwordSecurity.loginRateLimiter.attempts.clear();
        });
        it('should allow login attempts initially', ()=>{
            const result = _passwordSecurity.loginRateLimiter.isRateLimited('test@example.com');
            expect(result.isLimited).toBe(false);
            expect(result.attemptsLeft).toBe(5);
        });
        it('should track failed attempts', ()=>{
            _passwordSecurity.loginRateLimiter.recordFailedAttempt('test@example.com');
            const result = _passwordSecurity.loginRateLimiter.isRateLimited('test@example.com');
            expect(result.attemptsLeft).toBe(4);
        });
        it('should lockout after max attempts', ()=>{
            for(let i = 0; i < 5; i++){
                _passwordSecurity.loginRateLimiter.recordFailedAttempt('test@example.com');
            }
            const result = _passwordSecurity.loginRateLimiter.isRateLimited('test@example.com');
            expect(result.isLimited).toBe(true);
            expect(result.attemptsLeft).toBe(0);
        });
        it('should clear attempts on successful login', ()=>{
            _passwordSecurity.loginRateLimiter.recordFailedAttempt('test@example.com');
            _passwordSecurity.loginRateLimiter.clearAttempts('test@example.com');
            const result = _passwordSecurity.loginRateLimiter.isRateLimited('test@example.com');
            expect(result.isLimited).toBe(false);
            expect(result.attemptsLeft).toBe(5);
        });
        it('should track attempts per identifier', ()=>{
            _passwordSecurity.loginRateLimiter.recordFailedAttempt('user1@example.com');
            _passwordSecurity.loginRateLimiter.recordFailedAttempt('user2@example.com');
            const result1 = _passwordSecurity.loginRateLimiter.isRateLimited('user1@example.com');
            const result2 = _passwordSecurity.loginRateLimiter.isRateLimited('user2@example.com');
            expect(result1.attemptsLeft).toBe(4);
            expect(result2.attemptsLeft).toBe(4);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFxUZWNoIFZpdHRhXFxBcHBzXFxERU1PXFxfX3Rlc3RzX19cXGxpYlxccGFzc3dvcmRTZWN1cml0eS50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBQYXNzd29yZCBTZWN1cml0eSBUZXN0c1xyXG4gKiBUZXN0cyBmb3IgcGFzc3dvcmQgaGFzaGluZywgdmVyaWZpY2F0aW9uLCBhbmQgcmF0ZSBsaW1pdGluZ1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IFxyXG4gIGhhc2hQYXNzd29yZCwgXHJcbiAgdmVyaWZ5UGFzc3dvcmQsIFxyXG4gIHZhbGlkYXRlUGFzc3dvcmRTdHJlbmd0aCwgXHJcbiAgaXNTZWN1cmVIYXNoLFxyXG4gIGxvZ2luUmF0ZUxpbWl0ZXIgXHJcbn0gZnJvbSAnQC9saWIvcGFzc3dvcmRTZWN1cml0eSc7XHJcblxyXG4vLyBDcnlwdG8gaXMgbW9ja2VkIGluIGplc3Quc2V0dXAuanMsIGJ1dCB3ZSBuZWVkIHRvIHJlLWltcGxlbWVudCBpdCBpbiBiZWZvcmVFYWNoXHJcbi8vIGJlY2F1c2UgSmVzdCdzIHJlc2V0TW9ja3MgY2xlYXJzIHRoZSBpbXBsZW1lbnRhdGlvbnNcclxuXHJcbmNvbnN0IGNyeXB0b0hhc2hTdG9yZSA9IG5ldyBNYXAoKTtcclxuXHJcbi8vIE1vY2sgbG9jYWxTdG9yYWdlIGZvciByYXRlIGxpbWl0ZXIgdGVzdHNcclxubGV0IHJhdGVMaW1pdGVyU3RvcmUgPSB7fTtcclxuY29uc3QgcmF0ZUxpbWl0ZXJMb2NhbFN0b3JhZ2UgPSB7XHJcbiAgZ2V0SXRlbTogamVzdC5mbigoa2V5KSA9PiB7XHJcbiAgICByZXR1cm4gcmF0ZUxpbWl0ZXJTdG9yZVtrZXldIHx8IG51bGw7XHJcbiAgfSksXHJcbiAgc2V0SXRlbTogamVzdC5mbigoa2V5LCB2YWx1ZSkgPT4ge1xyXG4gICAgcmF0ZUxpbWl0ZXJTdG9yZVtrZXldID0gdmFsdWUudG9TdHJpbmcoKTtcclxuICB9KSxcclxuICByZW1vdmVJdGVtOiBqZXN0LmZuKChrZXkpID0+IHtcclxuICAgIGRlbGV0ZSByYXRlTGltaXRlclN0b3JlW2tleV07XHJcbiAgfSksXHJcbiAgY2xlYXI6IGplc3QuZm4oKCkgPT4ge1xyXG4gICAgcmF0ZUxpbWl0ZXJTdG9yZSA9IHt9O1xyXG4gIH0pXHJcbn07XHJcblxyXG4vLyBFbnN1cmUgd2luZG93IGV4aXN0c1xyXG5pZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICBnbG9iYWwud2luZG93ID0ge307XHJcbn1cclxuXHJcbmJlZm9yZUVhY2goKCkgPT4ge1xyXG4gIC8vIFJlc2V0IHJhdGUgbGltaXRlciBzdG9yZVxyXG4gIHJhdGVMaW1pdGVyU3RvcmUgPSB7fTtcclxuICBcclxuICAvLyBSZS1pbXBsZW1lbnQgbG9jYWxTdG9yYWdlIG1vY2tzIGZvciByYXRlIGxpbWl0ZXJcclxuICByYXRlTGltaXRlckxvY2FsU3RvcmFnZS5nZXRJdGVtLm1vY2tJbXBsZW1lbnRhdGlvbigoa2V5KSA9PiB7XHJcbiAgICByZXR1cm4gcmF0ZUxpbWl0ZXJTdG9yZVtrZXldIHx8IG51bGw7XHJcbiAgfSk7XHJcbiAgcmF0ZUxpbWl0ZXJMb2NhbFN0b3JhZ2Uuc2V0SXRlbS5tb2NrSW1wbGVtZW50YXRpb24oKGtleSwgdmFsdWUpID0+IHtcclxuICAgIHJhdGVMaW1pdGVyU3RvcmVba2V5XSA9IHZhbHVlLnRvU3RyaW5nKCk7XHJcbiAgfSk7XHJcbiAgcmF0ZUxpbWl0ZXJMb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbS5tb2NrSW1wbGVtZW50YXRpb24oKGtleSkgPT4ge1xyXG4gICAgZGVsZXRlIHJhdGVMaW1pdGVyU3RvcmVba2V5XTtcclxuICB9KTtcclxuICByYXRlTGltaXRlckxvY2FsU3RvcmFnZS5jbGVhci5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xyXG4gICAgcmF0ZUxpbWl0ZXJTdG9yZSA9IHt9O1xyXG4gIH0pO1xyXG4gIFxyXG4gIC8vIFNldCB1cCBsb2NhbFN0b3JhZ2UgZm9yIHJhdGUgbGltaXRlclxyXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdsb2NhbFN0b3JhZ2UnLCB7XHJcbiAgICB2YWx1ZTogcmF0ZUxpbWl0ZXJMb2NhbFN0b3JhZ2UsXHJcbiAgICB3cml0YWJsZTogdHJ1ZSxcclxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuICB9KTtcclxuICBnbG9iYWwubG9jYWxTdG9yYWdlID0gcmF0ZUxpbWl0ZXJMb2NhbFN0b3JhZ2U7XHJcbiAgXHJcbiAgLy8gRW5zdXJlIGNyeXB0byBpcyBzZXQgdXAgKEplc3QncyByZXNldE1vY2tzIG1pZ2h0IGNsZWFyIGl0KVxyXG4gIGlmICghZ2xvYmFsLmNyeXB0bykge1xyXG4gICAgZ2xvYmFsLmNyeXB0byA9IHt9O1xyXG4gIH1cclxuICBpZiAoIWdsb2JhbC5jcnlwdG8uc3VidGxlKSB7XHJcbiAgICBnbG9iYWwuY3J5cHRvLnN1YnRsZSA9IHt9O1xyXG4gIH1cclxuICBcclxuICAvLyBSZS1pbXBsZW1lbnQgY3J5cHRvIG1vY2tzIChKZXN0J3MgcmVzZXRNb2NrcyBtaWdodCBjbGVhciB0aGVtKVxyXG4gIGdsb2JhbC5jcnlwdG8uZ2V0UmFuZG9tVmFsdWVzID0gKGFycikgPT4ge1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgYXJyW2ldID0gKGkgKiAxNykgJSAyNTY7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXJyO1xyXG4gIH07XHJcbiAgXHJcbiAgLy8gU3RvcmUgcGFzc3dvcmQgZGF0YSB3aXRoIGtleU1hdGVyaWFsIGZvciBoYXNoIGdlbmVyYXRpb25cclxuICBjb25zdCBwYXNzd29yZERhdGFNYXAgPSBuZXcgV2Vha01hcCgpO1xyXG4gIFxyXG4gIGdsb2JhbC5jcnlwdG8uc3VidGxlLmltcG9ydEtleSA9IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oYXN5bmMgKGZvcm1hdCwga2V5RGF0YSwgYWxnb3JpdGhtLCBleHRyYWN0YWJsZSwga2V5VXNhZ2VzKSA9PiB7XHJcbiAgICAvLyBTdG9yZSB0aGUgcGFzc3dvcmQgZGF0YSAoa2V5RGF0YSBpcyB0aGUgcGFzc3dvcmQgYnl0ZXMpIHdpdGggdGhlIHJldHVybmVkIGtleU1hdGVyaWFsXHJcbiAgICBjb25zdCBrZXlNYXRlcmlhbCA9IHsgXHJcbiAgICAgIGZvcm1hdCwgXHJcbiAgICAgIGFsZ29yaXRobSwgXHJcbiAgICAgIGV4dHJhY3RhYmxlLCBcclxuICAgICAga2V5VXNhZ2VzLFxyXG4gICAgICBfcGFzc3dvcmREYXRhOiBuZXcgVWludDhBcnJheShrZXlEYXRhKSAvLyBTdG9yZSBwYXNzd29yZCBieXRlcyBmb3IgaGFzaCBnZW5lcmF0aW9uXHJcbiAgICB9O1xyXG4gICAgcGFzc3dvcmREYXRhTWFwLnNldChrZXlNYXRlcmlhbCwga2V5RGF0YSk7XHJcbiAgICByZXR1cm4ga2V5TWF0ZXJpYWw7XHJcbiAgfSk7XHJcbiAgXHJcbiAgZ2xvYmFsLmNyeXB0by5zdWJ0bGUuZGVyaXZlQml0cyA9IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oYXN5bmMgKGFsZ29yaXRobSwga2V5TWF0ZXJpYWwsIGxlbmd0aCkgPT4ge1xyXG4gICAgLy8gQ3JlYXRlIGEgY29uc2lzdGVudCBoYXNoIGJhc2VkIG9uIHNhbHQgQU5EIHBhc3N3b3JkXHJcbiAgICBjb25zdCBzYWx0SGV4ID0gQXJyYXkuZnJvbShhbGdvcml0aG0uc2FsdCkubWFwKGIgPT4gYi50b1N0cmluZygxNikucGFkU3RhcnQoMiwgJzAnKSkuam9pbignJyk7XHJcbiAgICBcclxuICAgIC8vIEdldCBwYXNzd29yZCBkYXRhIGZyb20ga2V5TWF0ZXJpYWxcclxuICAgIGxldCBwYXNzd29yZEhhc2ggPSAwO1xyXG4gICAgaWYgKGtleU1hdGVyaWFsICYmIGtleU1hdGVyaWFsLl9wYXNzd29yZERhdGEpIHtcclxuICAgICAgY29uc3QgcGFzc3dvcmRCeXRlcyA9IGtleU1hdGVyaWFsLl9wYXNzd29yZERhdGE7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgTWF0aC5taW4ocGFzc3dvcmRCeXRlcy5sZW5ndGgsIDIwKTsgaSsrKSB7XHJcbiAgICAgICAgcGFzc3dvcmRIYXNoID0gKHBhc3N3b3JkSGFzaCAqIDMxICsgcGFzc3dvcmRCeXRlc1tpXSkgJSAxMDAwMDAwO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IGtleSA9IGAke3NhbHRIZXh9LSR7bGVuZ3RofS0ke3Bhc3N3b3JkSGFzaH1gO1xyXG4gICAgXHJcbiAgICBpZiAoIWNyeXB0b0hhc2hTdG9yZS5oYXMoa2V5KSkge1xyXG4gICAgICAvLyBHZW5lcmF0ZSBhIHByZWRpY3RhYmxlIGhhc2ggYmFzZWQgb24gc2FsdCBhbmQgcGFzc3dvcmRcclxuICAgICAgY29uc3QgaGFzaCA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCAvIDgpO1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhhc2gubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBoYXNoW2ldID0gKGkgKiA3ICsgc2FsdEhleC5jaGFyQ29kZUF0KGkgJSBzYWx0SGV4Lmxlbmd0aCkgKyBwYXNzd29yZEhhc2gpICUgMjU2O1xyXG4gICAgICB9XHJcbiAgICAgIGNyeXB0b0hhc2hTdG9yZS5zZXQoa2V5LCBoYXNoLmJ1ZmZlcik7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHJldHVybiBjcnlwdG9IYXNoU3RvcmUuZ2V0KGtleSk7XHJcbiAgfSk7XHJcbiAgXHJcbiAgLy8gQ2xlYXIgaGFzaCBzdG9yZSBiZXR3ZWVuIHRlc3RzXHJcbiAgY3J5cHRvSGFzaFN0b3JlLmNsZWFyKCk7XHJcbn0pO1xyXG5cclxuZGVzY3JpYmUoJ1Bhc3N3b3JkIFNlY3VyaXR5JywgKCkgPT4ge1xyXG4gIGRlc2NyaWJlKCdoYXNoUGFzc3dvcmQnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGhhc2ggYSBwYXNzd29yZCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHBhc3N3b3JkID0gJ1Rlc3RQYXNzd29yZDEyMyc7XHJcbiAgICAgIGNvbnN0IGhhc2ggPSBhd2FpdCBoYXNoUGFzc3dvcmQocGFzc3dvcmQpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KGhhc2gpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdCh0eXBlb2YgaGFzaCkudG9CZSgnc3RyaW5nJyk7XHJcbiAgICAgIGV4cGVjdChoYXNoLmluY2x1ZGVzKCc6JykpLnRvQmUodHJ1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIGZvciBlbXB0eSBwYXNzd29yZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgZXhwZWN0KGhhc2hQYXNzd29yZCgnJykpLnJlamVjdHMudG9UaHJvdygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBlcnJvciBmb3Igbm9uLXN0cmluZyBwYXNzd29yZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgYXdhaXQgZXhwZWN0KGhhc2hQYXNzd29yZChudWxsKSkucmVqZWN0cy50b1Rocm93KCk7XHJcbiAgICAgIGF3YWl0IGV4cGVjdChoYXNoUGFzc3dvcmQoMTIzKSkucmVqZWN0cy50b1Rocm93KCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ3ZlcmlmeVBhc3N3b3JkJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCB2ZXJpZnkgY29ycmVjdCBwYXNzd29yZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcGFzc3dvcmQgPSAnVGVzdFBhc3N3b3JkMTIzJztcclxuICAgICAgY29uc3QgaGFzaCA9IGF3YWl0IGhhc2hQYXNzd29yZChwYXNzd29yZCk7XHJcbiAgICAgIGNvbnN0IGlzVmFsaWQgPSBhd2FpdCB2ZXJpZnlQYXNzd29yZChwYXNzd29yZCwgaGFzaCk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoaXNWYWxpZCkudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmVqZWN0IGluY29ycmVjdCBwYXNzd29yZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcGFzc3dvcmQgPSAnVGVzdFBhc3N3b3JkMTIzJztcclxuICAgICAgY29uc3QgaGFzaCA9IGF3YWl0IGhhc2hQYXNzd29yZChwYXNzd29yZCk7XHJcbiAgICAgIGNvbnN0IGlzVmFsaWQgPSBhd2FpdCB2ZXJpZnlQYXNzd29yZCgnV3JvbmdQYXNzd29yZCcsIGhhc2gpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KGlzVmFsaWQpLnRvQmUoZmFsc2UpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgcGxhaW4gdGV4dCBwYXNzd29yZHMgKGJhY2t3YXJkIGNvbXBhdGliaWxpdHkpJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwYXNzd29yZCA9ICdwbGFpbnRleHQxMjMnO1xyXG4gICAgICBjb25zdCBpc1ZhbGlkID0gYXdhaXQgdmVyaWZ5UGFzc3dvcmQocGFzc3dvcmQsIHBhc3N3b3JkKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChpc1ZhbGlkKS50b0JlKHRydWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gZmFsc2UgZm9yIGVtcHR5IGlucHV0cycsIGFzeW5jICgpID0+IHtcclxuICAgICAgZXhwZWN0KGF3YWl0IHZlcmlmeVBhc3N3b3JkKCcnLCAnaGFzaCcpKS50b0JlKGZhbHNlKTtcclxuICAgICAgZXhwZWN0KGF3YWl0IHZlcmlmeVBhc3N3b3JkKCdwYXNzd29yZCcsICcnKSkudG9CZShmYWxzZSk7XHJcbiAgICAgIGV4cGVjdChhd2FpdCB2ZXJpZnlQYXNzd29yZCgnJywgJycpKS50b0JlKGZhbHNlKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgndmFsaWRhdGVQYXNzd29yZFN0cmVuZ3RoJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBhY2NlcHQgc3Ryb25nIHBhc3N3b3JkcycsICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGVQYXNzd29yZFN0cmVuZ3RoKCdTdHJvbmdQYXNzMTIzJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuaXNWYWxpZCkudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmVqZWN0IHBhc3N3b3JkcyBzaG9ydGVyIHRoYW4gOCBjaGFyYWN0ZXJzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0ZVBhc3N3b3JkU3RyZW5ndGgoJ1Nob3J0MScpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmlzVmFsaWQpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QocmVzdWx0Lm1lc3NhZ2UpLnRvQ29udGFpbignOCBjaGFyYWN0ZXJzJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJlamVjdCBwYXNzd29yZHMgd2l0aG91dCBudW1iZXJzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0ZVBhc3N3b3JkU3RyZW5ndGgoJ05vTnVtYmVycycpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmlzVmFsaWQpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QocmVzdWx0Lm1lc3NhZ2UpLnRvQ29udGFpbignbnVtYmVyJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJlamVjdCBwYXNzd29yZHMgd2l0aG91dCBsZXR0ZXJzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0ZVBhc3N3b3JkU3RyZW5ndGgoJzEyMzQ1Njc4Jyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuaXNWYWxpZCkudG9CZShmYWxzZSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQubWVzc2FnZSkudG9Db250YWluKCdsZXR0ZXInKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmVqZWN0IHBhc3N3b3JkcyBsb25nZXIgdGhhbiAxMjggY2hhcmFjdGVycycsICgpID0+IHtcclxuICAgICAgY29uc3QgbG9uZ1Bhc3N3b3JkID0gJ2EnLnJlcGVhdCgxMjkpICsgJzEnO1xyXG4gICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0ZVBhc3N3b3JkU3RyZW5ndGgobG9uZ1Bhc3N3b3JkKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5pc1ZhbGlkKS50b0JlKGZhbHNlKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5tZXNzYWdlKS50b0NvbnRhaW4oJzEyOCBjaGFyYWN0ZXJzJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJlamVjdCBlbXB0eSBwYXNzd29yZHMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRlUGFzc3dvcmRTdHJlbmd0aCgnJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuaXNWYWxpZCkudG9CZShmYWxzZSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQubWVzc2FnZSkudG9Db250YWluKCdyZXF1aXJlZCcpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdpc1NlY3VyZUhhc2gnLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGlkZW50aWZ5IHNlY3VyZSBoYXNoIGZvcm1hdCcsICgpID0+IHtcclxuICAgICAgZXhwZWN0KGlzU2VjdXJlSGFzaCgnc2FsdDpoYXNoJykpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChpc1NlY3VyZUhhc2goJ2FiYzEyMzpkZWY0NTYnKSkudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmVqZWN0IHBsYWluIHRleHQgYXMgc2VjdXJlIGhhc2gnLCAoKSA9PiB7XHJcbiAgICAgIGV4cGVjdChpc1NlY3VyZUhhc2goJ3BsYWludGV4dCcpKS50b0JlKGZhbHNlKTtcclxuICAgICAgZXhwZWN0KGlzU2VjdXJlSGFzaCgncGFzc3dvcmQxMjMnKSkudG9CZShmYWxzZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBpbnZhbGlkIGZvcm1hdHMnLCAoKSA9PiB7XHJcbiAgICAgIGV4cGVjdChpc1NlY3VyZUhhc2goJycpKS50b0JlKGZhbHNlKTtcclxuICAgICAgZXhwZWN0KGlzU2VjdXJlSGFzaChudWxsKSkudG9CZShmYWxzZSk7XHJcbiAgICAgIGV4cGVjdChpc1NlY3VyZUhhc2goJ29ubHlzYWx0OicpKS50b0JlKGZhbHNlKTtcclxuICAgICAgZXhwZWN0KGlzU2VjdXJlSGFzaCgnOm9ubHloYXNoJykpLnRvQmUoZmFsc2UpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdMb2dpblJhdGVMaW1pdGVyJywgKCkgPT4ge1xyXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICAgIC8vIENsZWFyIHJhdGUgbGltaXRlciBzdGF0ZVxyXG4gICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnbG9naW5fYXR0ZW1wdHMnKTtcclxuICAgICAgfVxyXG4gICAgICBsb2dpblJhdGVMaW1pdGVyLmF0dGVtcHRzLmNsZWFyKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGFsbG93IGxvZ2luIGF0dGVtcHRzIGluaXRpYWxseScsICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gbG9naW5SYXRlTGltaXRlci5pc1JhdGVMaW1pdGVkKCd0ZXN0QGV4YW1wbGUuY29tJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuaXNMaW1pdGVkKS50b0JlKGZhbHNlKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5hdHRlbXB0c0xlZnQpLnRvQmUoNSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRyYWNrIGZhaWxlZCBhdHRlbXB0cycsICgpID0+IHtcclxuICAgICAgbG9naW5SYXRlTGltaXRlci5yZWNvcmRGYWlsZWRBdHRlbXB0KCd0ZXN0QGV4YW1wbGUuY29tJyk7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGxvZ2luUmF0ZUxpbWl0ZXIuaXNSYXRlTGltaXRlZCgndGVzdEBleGFtcGxlLmNvbScpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmF0dGVtcHRzTGVmdCkudG9CZSg0KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgbG9ja291dCBhZnRlciBtYXggYXR0ZW1wdHMnLCAoKSA9PiB7XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7XHJcbiAgICAgICAgbG9naW5SYXRlTGltaXRlci5yZWNvcmRGYWlsZWRBdHRlbXB0KCd0ZXN0QGV4YW1wbGUuY29tJyk7XHJcbiAgICAgIH1cclxuICAgICAgY29uc3QgcmVzdWx0ID0gbG9naW5SYXRlTGltaXRlci5pc1JhdGVMaW1pdGVkKCd0ZXN0QGV4YW1wbGUuY29tJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuaXNMaW1pdGVkKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmF0dGVtcHRzTGVmdCkudG9CZSgwKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgY2xlYXIgYXR0ZW1wdHMgb24gc3VjY2Vzc2Z1bCBsb2dpbicsICgpID0+IHtcclxuICAgICAgbG9naW5SYXRlTGltaXRlci5yZWNvcmRGYWlsZWRBdHRlbXB0KCd0ZXN0QGV4YW1wbGUuY29tJyk7XHJcbiAgICAgIGxvZ2luUmF0ZUxpbWl0ZXIuY2xlYXJBdHRlbXB0cygndGVzdEBleGFtcGxlLmNvbScpO1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBsb2dpblJhdGVMaW1pdGVyLmlzUmF0ZUxpbWl0ZWQoJ3Rlc3RAZXhhbXBsZS5jb20nKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5pc0xpbWl0ZWQpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmF0dGVtcHRzTGVmdCkudG9CZSg1KTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdHJhY2sgYXR0ZW1wdHMgcGVyIGlkZW50aWZpZXInLCAoKSA9PiB7XHJcbiAgICAgIGxvZ2luUmF0ZUxpbWl0ZXIucmVjb3JkRmFpbGVkQXR0ZW1wdCgndXNlcjFAZXhhbXBsZS5jb20nKTtcclxuICAgICAgbG9naW5SYXRlTGltaXRlci5yZWNvcmRGYWlsZWRBdHRlbXB0KCd1c2VyMkBleGFtcGxlLmNvbScpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzdWx0MSA9IGxvZ2luUmF0ZUxpbWl0ZXIuaXNSYXRlTGltaXRlZCgndXNlcjFAZXhhbXBsZS5jb20nKTtcclxuICAgICAgY29uc3QgcmVzdWx0MiA9IGxvZ2luUmF0ZUxpbWl0ZXIuaXNSYXRlTGltaXRlZCgndXNlcjJAZXhhbXBsZS5jb20nKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChyZXN1bHQxLmF0dGVtcHRzTGVmdCkudG9CZSg0KTtcclxuICAgICAgZXhwZWN0KHJlc3VsdDIuYXR0ZW1wdHNMZWZ0KS50b0JlKDQpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuIl0sIm5hbWVzIjpbImNyeXB0b0hhc2hTdG9yZSIsIk1hcCIsInJhdGVMaW1pdGVyU3RvcmUiLCJyYXRlTGltaXRlckxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJqZXN0IiwiZm4iLCJrZXkiLCJzZXRJdGVtIiwidmFsdWUiLCJ0b1N0cmluZyIsInJlbW92ZUl0ZW0iLCJjbGVhciIsIndpbmRvdyIsImdsb2JhbCIsImJlZm9yZUVhY2giLCJtb2NrSW1wbGVtZW50YXRpb24iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwibG9jYWxTdG9yYWdlIiwiY3J5cHRvIiwic3VidGxlIiwiZ2V0UmFuZG9tVmFsdWVzIiwiYXJyIiwiaSIsImxlbmd0aCIsInBhc3N3b3JkRGF0YU1hcCIsIldlYWtNYXAiLCJpbXBvcnRLZXkiLCJmb3JtYXQiLCJrZXlEYXRhIiwiYWxnb3JpdGhtIiwiZXh0cmFjdGFibGUiLCJrZXlVc2FnZXMiLCJrZXlNYXRlcmlhbCIsIl9wYXNzd29yZERhdGEiLCJVaW50OEFycmF5Iiwic2V0IiwiZGVyaXZlQml0cyIsInNhbHRIZXgiLCJBcnJheSIsImZyb20iLCJzYWx0IiwibWFwIiwiYiIsInBhZFN0YXJ0Iiwiam9pbiIsInBhc3N3b3JkSGFzaCIsInBhc3N3b3JkQnl0ZXMiLCJNYXRoIiwibWluIiwiaGFzIiwiaGFzaCIsImNoYXJDb2RlQXQiLCJidWZmZXIiLCJnZXQiLCJkZXNjcmliZSIsIml0IiwicGFzc3dvcmQiLCJoYXNoUGFzc3dvcmQiLCJleHBlY3QiLCJ0b0JlRGVmaW5lZCIsInRvQmUiLCJpbmNsdWRlcyIsInJlamVjdHMiLCJ0b1Rocm93IiwiaXNWYWxpZCIsInZlcmlmeVBhc3N3b3JkIiwicmVzdWx0IiwidmFsaWRhdGVQYXNzd29yZFN0cmVuZ3RoIiwibWVzc2FnZSIsInRvQ29udGFpbiIsImxvbmdQYXNzd29yZCIsInJlcGVhdCIsImlzU2VjdXJlSGFzaCIsImxvZ2luUmF0ZUxpbWl0ZXIiLCJhdHRlbXB0cyIsImlzUmF0ZUxpbWl0ZWQiLCJpc0xpbWl0ZWQiLCJhdHRlbXB0c0xlZnQiLCJyZWNvcmRGYWlsZWRBdHRlbXB0IiwiY2xlYXJBdHRlbXB0cyIsInJlc3VsdDEiLCJyZXN1bHQyIl0sIm1hcHBpbmdzIjoiQUFBQTs7O0NBR0M7Ozs7a0NBUU07QUFFUCxrRkFBa0Y7QUFDbEYsdURBQXVEO0FBRXZELE1BQU1BLGtCQUFrQixJQUFJQztBQUU1QiwyQ0FBMkM7QUFDM0MsSUFBSUMsbUJBQW1CLENBQUM7QUFDeEIsTUFBTUMsMEJBQTBCO0lBQzlCQyxTQUFTQyxLQUFLQyxFQUFFLENBQUMsQ0FBQ0M7UUFDaEIsT0FBT0wsZ0JBQWdCLENBQUNLLElBQUksSUFBSTtJQUNsQztJQUNBQyxTQUFTSCxLQUFLQyxFQUFFLENBQUMsQ0FBQ0MsS0FBS0U7UUFDckJQLGdCQUFnQixDQUFDSyxJQUFJLEdB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