af0f61c939c73574cc3fb452236d5623
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _subscription = require("../../lib/subscription.js");
// Mock localStorage for subscription tests
let store = {};
const localStorageMock = {
    getItem: jest.fn((key)=>{
        return store[key] || null;
    }),
    setItem: jest.fn((key, value)=>{
        store[key] = value.toString();
    }),
    removeItem: jest.fn((key)=>{
        delete store[key];
    }),
    clear: jest.fn(()=>{
        store = {};
    })
};
// Ensure window exists
if (typeof window === 'undefined') {
    global.window = {};
}
// Set up localStorage before any tests
Object.defineProperty(window, 'localStorage', {
    value: localStorageMock,
    writable: true,
    configurable: true
});
global.localStorage = localStorageMock;
beforeEach(()=>{
    // Reset the store
    store = {};
    // Re-create mock implementations (Jest's resetMocks might clear them)
    localStorageMock.getItem.mockImplementation((key)=>{
        return store[key] || null;
    });
    localStorageMock.setItem.mockImplementation((key, value)=>{
        store[key] = value.toString();
    });
    localStorageMock.removeItem.mockImplementation((key)=>{
        delete store[key];
    });
    localStorageMock.clear.mockImplementation(()=>{
        store = {};
    });
    // Re-setup localStorage to ensure it's fresh
    Object.defineProperty(window, 'localStorage', {
        value: localStorageMock,
        writable: true,
        configurable: true
    });
    global.localStorage = localStorageMock;
});
describe('Subscription Functions', ()=>{
    const createUser = (overrides = {})=>({
            id: '1',
            name: 'Test User',
            email: 'test@example.com',
            subscriptionTier: 'free',
            ...overrides
        });
    describe('getUserSubscriptionTier', ()=>{
        it('returns FREE for null user', ()=>{
            expect((0, _subscription.getUserSubscriptionTier)(null)).toBe(_subscription.SUBSCRIPTION_TIERS.FREE);
        });
        it('returns FREE for user without subscriptionTier', ()=>{
            const user = createUser({
                subscriptionTier: undefined
            });
            expect((0, _subscription.getUserSubscriptionTier)(user)).toBe(_subscription.SUBSCRIPTION_TIERS.FREE);
        });
        it('returns correct tier for premium user', ()=>{
            const user = createUser({
                subscriptionTier: 'plus'
            });
            expect((0, _subscription.getUserSubscriptionTier)(user)).toBe('plus');
        });
    });
    describe('isPremiumUser', ()=>{
        it('returns false for free user', ()=>{
            const user = createUser({
                subscriptionTier: 'free'
            });
            expect((0, _subscription.isPremiumUser)(user)).toBe(false);
        });
        it('returns true for basic user', ()=>{
            const user = createUser({
                subscriptionTier: 'basic'
            });
            expect((0, _subscription.isPremiumUser)(user)).toBe(true);
        });
        it('returns true for plus user', ()=>{
            const user = createUser({
                subscriptionTier: 'plus'
            });
            expect((0, _subscription.isPremiumUser)(user)).toBe(true);
        });
        it('returns true for vip user', ()=>{
            const user = createUser({
                subscriptionTier: 'vip'
            });
            expect((0, _subscription.isPremiumUser)(user)).toBe(true);
        });
        it('returns false for null user', ()=>{
            expect((0, _subscription.isPremiumUser)(null)).toBe(false);
        });
    });
    describe('getDailyLikesRemaining', ()=>{
        it('returns unlimited for premium users', ()=>{
            const user = createUser({
                subscriptionTier: 'plus'
            });
            const remaining = (0, _subscription.getDailyLikesRemaining)(user);
            expect(remaining).toBe('unlimited');
        });
        it('returns limit for free users', ()=>{
            const user = createUser({
                subscriptionTier: 'free'
            });
            const remaining = (0, _subscription.getDailyLikesRemaining)(user);
            expect(remaining).toBe(_subscription.FREE_USER_LIMITS.DAILY_LIKES);
        });
        it('tracks daily likes for free users', ()=>{
            const user = createUser({
                subscriptionTier: 'free'
            });
            // Record some likes
            (0, _subscription.recordLike)(user);
            (0, _subscription.recordLike)(user);
            const remaining = (0, _subscription.getDailyLikesRemaining)(user);
            expect(remaining).toBe(_subscription.FREE_USER_LIMITS.DAILY_LIKES - 2);
        });
        it('resets daily likes after 24 hours', ()=>{
            const user = createUser({
                subscriptionTier: 'free',
                lastLikeReset: new Date(Date.now() - 25 * 60 * 60 * 1000).toISOString()
            });
            const remaining = (0, _subscription.getDailyLikesRemaining)(user);
            expect(remaining).toBe(_subscription.FREE_USER_LIMITS.DAILY_LIKES);
        });
    });
    describe('recordLike', ()=>{
        it('returns true for premium users', ()=>{
            const user = createUser({
                subscriptionTier: 'plus'
            });
            expect((0, _subscription.recordLike)(user)).toBe(true);
        });
        it('returns true when likes remaining', ()=>{
            const user = createUser({
                subscriptionTier: 'free'
            });
            expect((0, _subscription.recordLike)(user)).toBe(true);
        });
        it('returns false when daily limit reached', ()=>{
            const user = createUser({
                subscriptionTier: 'free'
            });
            // Exhaust daily likes
            for(let i = 0; i < _subscription.FREE_USER_LIMITS.DAILY_LIKES; i++){
                (0, _subscription.recordLike)(user);
            }
            expect((0, _subscription.recordLike)(user)).toBe(false);
        });
    });
    describe('hasPremiumFeature', ()=>{
        it('returns false for free users', ()=>{
            const user = createUser({
                subscriptionTier: 'free'
            });
            expect((0, _subscription.hasPremiumFeature)(user, 'ADVANCED_FILTERS')).toBe(false);
        });
        it('returns true for premium users', ()=>{
            const user = createUser({
                subscriptionTier: 'plus'
            });
            expect((0, _subscription.hasPremiumFeature)(user, 'ADVANCED_FILTERS')).toBe(true);
        });
        it('returns false for invalid feature', ()=>{
            const user = createUser({
                subscriptionTier: 'plus'
            });
            expect((0, _subscription.hasPremiumFeature)(user, 'INVALID_FEATURE')).toBe(false);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFxUZWNoIFZpdHRhXFxBcHBzXFxERU1PXFxfX3Rlc3RzX19cXGxpYlxcc3Vic2NyaXB0aW9uLnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgZ2V0VXNlclN1YnNjcmlwdGlvblRpZXIsXG4gIGlzUHJlbWl1bVVzZXIsXG4gIGdldERhaWx5TGlrZXNSZW1haW5pbmcsXG4gIHJlY29yZExpa2UsXG4gIGhhc1ByZW1pdW1GZWF0dXJlLFxuICBTVUJTQ1JJUFRJT05fVElFUlMsXG4gIEZSRUVfVVNFUl9MSU1JVFNcbn0gZnJvbSAnQC9saWIvc3Vic2NyaXB0aW9uJ1xuXG4vLyBNb2NrIGxvY2FsU3RvcmFnZSBmb3Igc3Vic2NyaXB0aW9uIHRlc3RzXG5sZXQgc3RvcmUgPSB7fTtcbmNvbnN0IGxvY2FsU3RvcmFnZU1vY2sgPSB7XG4gIGdldEl0ZW06IGplc3QuZm4oKGtleSkgPT4ge1xuICAgIHJldHVybiBzdG9yZVtrZXldIHx8IG51bGw7XG4gIH0pLFxuICBzZXRJdGVtOiBqZXN0LmZuKChrZXksIHZhbHVlKSA9PiB7XG4gICAgc3RvcmVba2V5XSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gIH0pLFxuICByZW1vdmVJdGVtOiBqZXN0LmZuKChrZXkpID0+IHtcbiAgICBkZWxldGUgc3RvcmVba2V5XTtcbiAgfSksXG4gIGNsZWFyOiBqZXN0LmZuKCgpID0+IHtcbiAgICBzdG9yZSA9IHt9O1xuICB9KVxufTtcblxuLy8gRW5zdXJlIHdpbmRvdyBleGlzdHNcbmlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykge1xuICBnbG9iYWwud2luZG93ID0ge307XG59XG5cbi8vIFNldCB1cCBsb2NhbFN0b3JhZ2UgYmVmb3JlIGFueSB0ZXN0c1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ2xvY2FsU3RvcmFnZScsIHtcbiAgdmFsdWU6IGxvY2FsU3RvcmFnZU1vY2ssXG4gIHdyaXRhYmxlOiB0cnVlLFxuICBjb25maWd1cmFibGU6IHRydWUsXG59KTtcbmdsb2JhbC5sb2NhbFN0b3JhZ2UgPSBsb2NhbFN0b3JhZ2VNb2NrO1xuXG5iZWZvcmVFYWNoKCgpID0+IHtcbiAgLy8gUmVzZXQgdGhlIHN0b3JlXG4gIHN0b3JlID0ge307XG4gIFxuICAvLyBSZS1jcmVhdGUgbW9jayBpbXBsZW1lbnRhdGlvbnMgKEplc3QncyByZXNldE1vY2tzIG1pZ2h0IGNsZWFyIHRoZW0pXG4gIGxvY2FsU3RvcmFnZU1vY2suZ2V0SXRlbS5tb2NrSW1wbGVtZW50YXRpb24oKGtleSkgPT4ge1xuICAgIHJldHVybiBzdG9yZVtrZXldIHx8IG51bGw7XG4gIH0pO1xuICBsb2NhbFN0b3JhZ2VNb2NrLnNldEl0ZW0ubW9ja0ltcGxlbWVudGF0aW9uKChrZXksIHZhbHVlKSA9PiB7XG4gICAgc3RvcmVba2V5XSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gIH0pO1xuICBsb2NhbFN0b3JhZ2VNb2NrLnJlbW92ZUl0ZW0ubW9ja0ltcGxlbWVudGF0aW9uKChrZXkpID0+IHtcbiAgICBkZWxldGUgc3RvcmVba2V5XTtcbiAgfSk7XG4gIGxvY2FsU3RvcmFnZU1vY2suY2xlYXIubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcbiAgICBzdG9yZSA9IHt9O1xuICB9KTtcbiAgXG4gIC8vIFJlLXNldHVwIGxvY2FsU3RvcmFnZSB0byBlbnN1cmUgaXQncyBmcmVzaFxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCAnbG9jYWxTdG9yYWdlJywge1xuICAgIHZhbHVlOiBsb2NhbFN0b3JhZ2VNb2NrLFxuICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgfSk7XG4gIGdsb2JhbC5sb2NhbFN0b3JhZ2UgPSBsb2NhbFN0b3JhZ2VNb2NrO1xufSk7XG5cbmRlc2NyaWJlKCdTdWJzY3JpcHRpb24gRnVuY3Rpb25zJywgKCkgPT4ge1xuICBjb25zdCBjcmVhdGVVc2VyID0gKG92ZXJyaWRlcyA9IHt9KSA9PiAoe1xuICAgIGlkOiAnMScsXG4gICAgbmFtZTogJ1Rlc3QgVXNlcicsXG4gICAgZW1haWw6ICd0ZXN0QGV4YW1wbGUuY29tJyxcbiAgICBzdWJzY3JpcHRpb25UaWVyOiAnZnJlZScsXG4gICAgLi4ub3ZlcnJpZGVzXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ2dldFVzZXJTdWJzY3JpcHRpb25UaWVyJywgKCkgPT4ge1xuICAgIGl0KCdyZXR1cm5zIEZSRUUgZm9yIG51bGwgdXNlcicsICgpID0+IHtcbiAgICAgIGV4cGVjdChnZXRVc2VyU3Vic2NyaXB0aW9uVGllcihudWxsKSkudG9CZShTVUJTQ1JJUFRJT05fVElFUlMuRlJFRSlcbiAgICB9KVxuXG4gICAgaXQoJ3JldHVybnMgRlJFRSBmb3IgdXNlciB3aXRob3V0IHN1YnNjcmlwdGlvblRpZXInLCAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VyID0gY3JlYXRlVXNlcih7IHN1YnNjcmlwdGlvblRpZXI6IHVuZGVmaW5lZCB9KVxuICAgICAgZXhwZWN0KGdldFVzZXJTdWJzY3JpcHRpb25UaWVyKHVzZXIpKS50b0JlKFNVQlNDUklQVElPTl9USUVSUy5GUkVFKVxuICAgIH0pXG5cbiAgICBpdCgncmV0dXJucyBjb3JyZWN0IHRpZXIgZm9yIHByZW1pdW0gdXNlcicsICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXIgPSBjcmVhdGVVc2VyKHsgc3Vic2NyaXB0aW9uVGllcjogJ3BsdXMnIH0pXG4gICAgICBleHBlY3QoZ2V0VXNlclN1YnNjcmlwdGlvblRpZXIodXNlcikpLnRvQmUoJ3BsdXMnKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ2lzUHJlbWl1bVVzZXInLCAoKSA9PiB7XG4gICAgaXQoJ3JldHVybnMgZmFsc2UgZm9yIGZyZWUgdXNlcicsICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXIgPSBjcmVhdGVVc2VyKHsgc3Vic2NyaXB0aW9uVGllcjogJ2ZyZWUnIH0pXG4gICAgICBleHBlY3QoaXNQcmVtaXVtVXNlcih1c2VyKSkudG9CZShmYWxzZSlcbiAgICB9KVxuXG4gICAgaXQoJ3JldHVybnMgdHJ1ZSBmb3IgYmFzaWMgdXNlcicsICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXIgPSBjcmVhdGVVc2VyKHsgc3Vic2NyaXB0aW9uVGllcjogJ2Jhc2ljJyB9KVxuICAgICAgZXhwZWN0KGlzUHJlbWl1bVVzZXIodXNlcikpLnRvQmUodHJ1ZSlcbiAgICB9KVxuXG4gICAgaXQoJ3JldHVybnMgdHJ1ZSBmb3IgcGx1cyB1c2VyJywgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IGNyZWF0ZVVzZXIoeyBzdWJzY3JpcHRpb25UaWVyOiAncGx1cycgfSlcbiAgICAgIGV4cGVjdChpc1ByZW1pdW1Vc2VyKHVzZXIpKS50b0JlKHRydWUpXG4gICAgfSlcblxuICAgIGl0KCdyZXR1cm5zIHRydWUgZm9yIHZpcCB1c2VyJywgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IGNyZWF0ZVVzZXIoeyBzdWJzY3JpcHRpb25UaWVyOiAndmlwJyB9KVxuICAgICAgZXhwZWN0KGlzUHJlbWl1bVVzZXIodXNlcikpLnRvQmUodHJ1ZSlcbiAgICB9KVxuXG4gICAgaXQoJ3JldHVybnMgZmFsc2UgZm9yIG51bGwgdXNlcicsICgpID0+IHtcbiAgICAgIGV4cGVjdChpc1ByZW1pdW1Vc2VyKG51bGwpKS50b0JlKGZhbHNlKVxuICAgIH0pXG4gIH0pXG5cbiAgZGVzY3JpYmUoJ2dldERhaWx5TGlrZXNSZW1haW5pbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3JldHVybnMgdW5saW1pdGVkIGZvciBwcmVtaXVtIHVzZXJzJywgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IGNyZWF0ZVVzZXIoeyBzdWJzY3JpcHRpb25UaWVyOiAncGx1cycgfSlcbiAgICAgIGNvbnN0IHJlbWFpbmluZyA9IGdldERhaWx5TGlrZXNSZW1haW5pbmcodXNlcilcbiAgICAgIGV4cGVjdChyZW1haW5pbmcpLnRvQmUoJ3VubGltaXRlZCcpXG4gICAgfSlcblxuICAgIGl0KCdyZXR1cm5zIGxpbWl0IGZvciBmcmVlIHVzZXJzJywgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IGNyZWF0ZVVzZXIoeyBzdWJzY3JpcHRpb25UaWVyOiAnZnJlZScgfSlcbiAgICAgIGNvbnN0IHJlbWFpbmluZyA9IGdldERhaWx5TGlrZXNSZW1haW5pbmcodXNlcilcbiAgICAgIGV4cGVjdChyZW1haW5pbmcpLnRvQmUoRlJFRV9VU0VSX0xJTUlUUy5EQUlMWV9MSUtFUylcbiAgICB9KVxuXG4gICAgaXQoJ3RyYWNrcyBkYWlseSBsaWtlcyBmb3IgZnJlZSB1c2VycycsICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXIgPSBjcmVhdGVVc2VyKHsgc3Vic2NyaXB0aW9uVGllcjogJ2ZyZWUnIH0pXG4gICAgICBcbiAgICAgIC8vIFJlY29yZCBzb21lIGxpa2VzXG4gICAgICByZWNvcmRMaWtlKHVzZXIpXG4gICAgICByZWNvcmRMaWtlKHVzZXIpXG4gICAgICBcbiAgICAgIGNvbnN0IHJlbWFpbmluZyA9IGdldERhaWx5TGlrZXNSZW1haW5pbmcodXNlcilcbiAgICAgIGV4cGVjdChyZW1haW5pbmcpLnRvQmUoRlJFRV9VU0VSX0xJTUlUUy5EQUlMWV9MSUtFUyAtIDIpXG4gICAgfSlcblxuICAgIGl0KCdyZXNldHMgZGFpbHkgbGlrZXMgYWZ0ZXIgMjQgaG91cnMnLCAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VyID0gY3JlYXRlVXNlcih7IFxuICAgICAgICBzdWJzY3JpcHRpb25UaWVyOiAnZnJlZScsXG4gICAgICAgIGxhc3RMaWtlUmVzZXQ6IG5ldyBEYXRlKERhdGUubm93KCkgLSAyNSAqIDYwICogNjAgKiAxMDAwKS50b0lTT1N0cmluZygpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBjb25zdCByZW1haW5pbmcgPSBnZXREYWlseUxpa2VzUmVtYWluaW5nKHVzZXIpXG4gICAgICBleHBlY3QocmVtYWluaW5nKS50b0JlKEZSRUVfVVNFUl9MSU1JVFMuREFJTFlfTElLRVMpXG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgncmVjb3JkTGlrZScsICgpID0+IHtcbiAgICBpdCgncmV0dXJucyB0cnVlIGZvciBwcmVtaXVtIHVzZXJzJywgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IGNyZWF0ZVVzZXIoeyBzdWJzY3JpcHRpb25UaWVyOiAncGx1cycgfSlcbiAgICAgIGV4cGVjdChyZWNvcmRMaWtlKHVzZXIpKS50b0JlKHRydWUpXG4gICAgfSlcblxuICAgIGl0KCdyZXR1cm5zIHRydWUgd2hlbiBsaWtlcyByZW1haW5pbmcnLCAoKSA9PiB7XG4gICAgICBjb25zdCB1c2VyID0gY3JlYXRlVXNlcih7IHN1YnNjcmlwdGlvblRpZXI6ICdmcmVlJyB9KVxuICAgICAgZXhwZWN0KHJlY29yZExpa2UodXNlcikpLnRvQmUodHJ1ZSlcbiAgICB9KVxuXG4gICAgaXQoJ3JldHVybnMgZmFsc2Ugd2hlbiBkYWlseSBsaW1pdCByZWFjaGVkJywgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IGNyZWF0ZVVzZXIoeyBzdWJzY3JpcHRpb25UaWVyOiAnZnJlZScgfSlcbiAgICAgIFxuICAgICAgLy8gRXhoYXVzdCBkYWlseSBsaWtlc1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBGUkVFX1VTRVJfTElNSVRTLkRBSUxZX0xJS0VTOyBpKyspIHtcbiAgICAgICAgcmVjb3JkTGlrZSh1c2VyKVxuICAgICAgfVxuICAgICAgXG4gICAgICBleHBlY3QocmVjb3JkTGlrZSh1c2VyKSkudG9CZShmYWxzZSlcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCdoYXNQcmVtaXVtRmVhdHVyZScsICgpID0+IHtcbiAgICBpdCgncmV0dXJucyBmYWxzZSBmb3IgZnJlZSB1c2VycycsICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXIgPSBjcmVhdGVVc2VyKHsgc3Vic2NyaXB0aW9uVGllcjogJ2ZyZWUnIH0pXG4gICAgICBleHBlY3QoaGFzUHJlbWl1bUZlYXR1cmUodXNlciwgJ0FEVkFOQ0VEX0ZJTFRFUlMnKSkudG9CZShmYWxzZSlcbiAgICB9KVxuXG4gICAgaXQoJ3JldHVybnMgdHJ1ZSBmb3IgcHJlbWl1bSB1c2VycycsICgpID0+IHtcbiAgICAgIGNvbnN0IHVzZXIgPSBjcmVhdGVVc2VyKHsgc3Vic2NyaXB0aW9uVGllcjogJ3BsdXMnIH0pXG4gICAgICBleHBlY3QoaGFzUHJlbWl1bUZlYXR1cmUodXNlciwgJ0FEVkFOQ0VEX0ZJTFRFUlMnKSkudG9CZSh0cnVlKVxuICAgIH0pXG5cbiAgICBpdCgncmV0dXJucyBmYWxzZSBmb3IgaW52YWxpZCBmZWF0dXJlJywgKCkgPT4ge1xuICAgICAgY29uc3QgdXNlciA9IGNyZWF0ZVVzZXIoeyBzdWJzY3JpcHRpb25UaWVyOiAncGx1cycgfSlcbiAgICAgIGV4cGVjdChoYXNQcmVtaXVtRmVhdHVyZSh1c2VyLCAnSU5WQUxJRF9GRUFUVVJFJykpLnRvQmUoZmFsc2UpXG4gICAgfSlcbiAgfSlcbn0pXG4iXSwibmFtZXMiOlsic3RvcmUiLCJsb2NhbFN0b3JhZ2VNb2NrIiwiZ2V0SXRlbSIsImplc3QiLCJmbiIsImtleSIsInNldEl0ZW0iLCJ2YWx1ZSIsInRvU3RyaW5nIiwicmVtb3ZlSXRlbSIsImNsZWFyIiwid2luZG93IiwiZ2xvYmFsIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJ3cml0YWJsZSIsImNvbmZpZ3VyYWJsZSIsImxvY2FsU3RvcmFnZSIsImJlZm9yZUVhY2giLCJtb2NrSW1wbGVtZW50YXRpb24iLCJkZXNjcmliZSIsImNyZWF0ZVVzZXIiLCJvdmVycmlkZXMiLCJpZCIsIm5hbWUiLCJlbWFpbCIsInN1YnNjcmlwdGlvblRpZXIiLCJpdCIsImV4cGVjdCIsImdldFVzZXJTdWJzY3JpcHRpb25UaWVyIiwidG9CZSIsIlNVQlNDUklQVElPTl9USUVSUyIsIkZSRUUiLCJ1c2VyIiwidW5kZWZpbmVkIiwiaXNQcmVtaXVtVXNlciIsInJlbWFpbmluZyIsImdldERhaWx5TGlrZXNSZW1haW5pbmciLCJGUkVFX1VTRVJfTElNSVRTIiwiREFJTFlfTElLRVMiLCJyZWNvcmRMaWtlIiwibGFzdExpa2VSZXNldCIsIkRhdGUiLCJub3ciLCJ0b0lTT1N0cmluZyIsImkiLCJoYXNQcmVtaXVtRmVhdHVyZSJdLCJtYXBwaW5ncyI6Ijs7Ozs4QkFRTztBQUVQLDJDQUEyQztBQUMzQyxJQUFJQSxRQUFRLENBQUM7QUFDYixNQUFNQyxtQkFBbUI7SUFDdkJDLFNBQVNDLEtBQUtDLEVBQUUsQ0FBQyxDQUFDQztRQUNoQixPQUFPTCxLQUFLLENBQUNLLElBQUksSUFBSTtJQUN2QjtJQUNBQyxTQUFTSCxLQUFLQyxFQUFFLENBQUMsQ0FBQ0MsS0FBS0U7UUFDckJQLEtBQUssQ0FBQ0ssSUFBSSxHQUFHRSxNQUFNQyxRQUFRO0lBQzdCO0lBQ0FDLFlBQVlOLEtBQUtDLEVBQUUsQ0FBQyxDQUFDQztRQUNuQixPQUFPTCxLQUFLLENBQUNLLElBQUk7SUFDbkI7SUFDQUssT0FBT1AsS0FBS0MsRUFBRSxDQUFDO1FBQ2JKLFFBQVEsQ0FBQztJQUNYO0FBQ0Y7QUFFQSx1QkFBdUI7QUFDdkIsSUFBSSxPQUFPVyxXQUFXLGFBQWE7SUFDakNDLE9BQU9ELE1BQU0sR0FBRyxDQUFDO0FBQ25CO0FBRUEsdUNBQXVDO0FBQ3ZDRSxPQUFPQyxjQUFjLENBQUNILFFBQVEsZ0JBQWdCO0lBQzVDSixPQUFPTjtJQUNQYyxVQUFVO0lBQ1ZDLGNBQWM7QUFDaEI7QUFDQUosT0FBT0ssWUFBWSxHQUFHaEI7QUFFdEJpQixXQUFXO0lBQ1Qsa0JBQWtCO0lBQ2xCbEIsUUFBUSxDQUFDO0lBRVQsc0VBQXNFO0lBQ3RFQyxpQkFBaUJDLE9BQU8sQ0FBQ2lCLGtCQUFrQixDQUFDLENBQUNkO1FBQzNDLE9BQU9MLEtBQUssQ0FBQ0ssSUFBSSxJQUFJO0lBQ3ZCO0lBQ0FKLGlCQUFpQkssT0FBTyxDQUFDYSxrQkFBa0IsQ0FBQyxDQUFDZCxLQUFLRTtRQUNoRFAsS0FBSyxDQUFDSyxJQUFJLEdBQUdFLE1BQU1DLFFBQVE7SUFDN0I7SUFDQVAsaUJBQWlCUSxVQUFVLENBQUNVLGtCQUFrQixDQUFDLENB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