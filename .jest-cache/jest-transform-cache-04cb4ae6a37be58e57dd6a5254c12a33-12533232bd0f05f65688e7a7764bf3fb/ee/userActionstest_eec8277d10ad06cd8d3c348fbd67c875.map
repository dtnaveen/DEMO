{"version":3,"sources":["D:\\Tech Vitta\\Apps\\DEMO\\__tests__\\lib\\userActions.test.js"],"sourcesContent":["import {\r\n  getUserActions,\r\n  setUserActions,\r\n  addLike,\r\n  addPass,\r\n  isLiked,\r\n  isPassed,\r\n  getLikes\r\n} from '@/lib/localStorage'\r\n\r\n// Mock localStorage\r\nlet store = {};\r\nconst localStorageMock = {\r\n  getItem: jest.fn((key) => {\r\n    return store[key] || null;\r\n  }),\r\n  setItem: jest.fn((key, value) => {\r\n    store[key] = value.toString();\r\n  }),\r\n  removeItem: jest.fn((key) => {\r\n    delete store[key];\r\n  }),\r\n  clear: jest.fn(() => {\r\n    store = {};\r\n  })\r\n};\r\n\r\n// Ensure window exists before any tests\r\nif (typeof window === 'undefined') {\r\n  global.window = {};\r\n}\r\n\r\n// Set up localStorage before any imports or tests run\r\nObject.defineProperty(window, 'localStorage', {\r\n  value: localStorageMock,\r\n  writable: true,\r\n  configurable: true,\r\n});\r\nglobal.localStorage = localStorageMock;\r\n\r\nbeforeEach(() => {\r\n  // Reset the store\r\n  store = {};\r\n  // Clear all mocks (but keep implementations)\r\n  localStorageMock.getItem.mockClear();\r\n  localStorageMock.setItem.mockClear();\r\n  localStorageMock.removeItem.mockClear();\r\n  localStorageMock.clear.mockClear();\r\n  \r\n  // Re-setup localStorage to ensure it's fresh\r\n  Object.defineProperty(window, 'localStorage', {\r\n    value: localStorageMock,\r\n    writable: true,\r\n    configurable: true,\r\n  });\r\n  global.localStorage = localStorageMock;\r\n})\r\n\r\ndescribe('User Actions', () => {\r\n  describe('getUserActions', () => {\r\n    it('returns default actions when none exist', () => {\r\n      const actions = getUserActions()\r\n      expect(actions).toEqual({ likes: [], passes: [] })\r\n    })\r\n\r\n    it('returns stored actions', () => {\r\n      const storedActions = { likes: ['1', '2'], passes: ['3'] }\r\n      localStorageMock.setItem('userActions', JSON.stringify(storedActions))\r\n      \r\n      const actions = getUserActions()\r\n      expect(actions).toEqual(storedActions)\r\n    })\r\n  })\r\n\r\n  describe('setUserActions', () => {\r\n    it('saves actions to localStorage', () => {\r\n      const actions = { likes: ['1'], passes: ['2'] }\r\n      setUserActions(actions)\r\n      \r\n      expect(localStorageMock.setItem).toHaveBeenCalledWith(\r\n        'userActions',\r\n        JSON.stringify(actions)\r\n      )\r\n    })\r\n  })\r\n\r\n  describe('addLike', () => {\r\n    it('adds user ID to likes', () => {\r\n      addLike('user1')\r\n      const actions = getUserActions()\r\n      expect(actions.likes).toContain('user1')\r\n    })\r\n\r\n    it('does not add duplicate likes', () => {\r\n      addLike('user1')\r\n      addLike('user1')\r\n      const actions = getUserActions()\r\n      expect(actions.likes.filter(id => id === 'user1').length).toBe(1)\r\n    })\r\n  })\r\n\r\n  describe('addPass', () => {\r\n    it('adds user ID to passes', () => {\r\n      addPass('user1')\r\n      const actions = getUserActions()\r\n      expect(actions.passes).toContain('user1')\r\n    })\r\n\r\n    it('does not add duplicate passes', () => {\r\n      addPass('user1')\r\n      addPass('user1')\r\n      const actions = getUserActions()\r\n      expect(actions.passes.filter(id => id === 'user1').length).toBe(1)\r\n    })\r\n  })\r\n\r\n  describe('isLiked', () => {\r\n    it('returns true for liked user', () => {\r\n      addLike('user1')\r\n      expect(isLiked('user1')).toBe(true)\r\n    })\r\n\r\n    it('returns false for not liked user', () => {\r\n      expect(isLiked('user1')).toBe(false)\r\n    })\r\n  })\r\n\r\n  describe('isPassed', () => {\r\n    it('returns true for passed user', () => {\r\n      addPass('user1')\r\n      expect(isPassed('user1')).toBe(true)\r\n    })\r\n\r\n    it('returns false for not passed user', () => {\r\n      expect(isPassed('user1')).toBe(false)\r\n    })\r\n  })\r\n\r\n  describe('getLikes', () => {\r\n    it('returns all liked user IDs', () => {\r\n      addLike('user1')\r\n      addLike('user2')\r\n      \r\n      const likes = getLikes()\r\n      expect(likes).toContain('user1')\r\n      expect(likes).toContain('user2')\r\n    })\r\n\r\n    it('returns empty array when no likes', () => {\r\n      const likes = getLikes()\r\n      expect(likes).toEqual([])\r\n    })\r\n  })\r\n})\r\n\r\n"],"names":["store","localStorageMock","getItem","jest","fn","key","setItem","value","toString","removeItem","clear","window","global","Object","defineProperty","writable","configurable","localStorage","beforeEach","mockClear","describe","it","actions","getUserActions","expect","toEqual","likes","passes","storedActions","JSON","stringify","setUserActions","toHaveBeenCalledWith","addLike","toContain","filter","id","length","toBe","addPass","isLiked","isPassed","getLikes"],"mappings":"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"}