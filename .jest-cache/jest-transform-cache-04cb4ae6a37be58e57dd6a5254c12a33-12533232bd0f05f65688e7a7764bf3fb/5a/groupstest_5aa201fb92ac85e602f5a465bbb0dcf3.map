{"version":3,"sources":["D:\\Tech Vitta\\Apps\\DEMO\\__tests__\\pages\\groups.test.js"],"sourcesContent":["/**\r\n * Groups Page Tests\r\n * Tests for Groups feature functionality\r\n */\r\n\r\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\r\nimport { useRouter } from 'next/navigation';\r\nimport GroupsPage from '@/app/groups/page';\r\nimport { getCurrentUser } from '@/lib/localStorage';\r\nimport { showToast } from '@/utils/helpers';\r\n\r\n// Mock dependencies\r\njest.mock('next/navigation', () => ({\r\n  useRouter: jest.fn(),\r\n  useSearchParams: jest.fn(() => new URLSearchParams()),\r\n  usePathname: jest.fn(() => '/groups'),\r\n}));\r\njest.mock('@/lib/localStorage');\r\njest.mock('@/utils/helpers');\r\njest.mock('@/components/ui/Card', () => {\r\n  return function Card({ children, className, onClick }) {\r\n    return <div className={className} onClick={onClick} data-testid=\"card\">{children}</div>;\r\n  };\r\n});\r\njest.mock('@/components/ui/Button', () => {\r\n  return function Button({ children, onClick, disabled, className, variant }) {\r\n    return <button onClick={onClick} disabled={disabled} className={className} data-testid=\"button\">{children}</button>;\r\n  };\r\n});\r\njest.mock('@/components/ui/Input', () => {\r\n  return function Input({ placeholder, value, onChange, className }) {\r\n    return <input placeholder={placeholder} value={value} onChange={onChange} className={className} data-testid=\"input\" />;\r\n  };\r\n});\r\n\r\nconst mockPush = jest.fn();\r\nconst mockRouter = {\r\n  push: mockPush,\r\n  back: jest.fn(),\r\n  replace: jest.fn(),\r\n};\r\n\r\nconst mockUser = {\r\n  id: 'user1',\r\n  name: 'Test User',\r\n  email: 'test@example.com',\r\n  subscriptionTier: 'free',\r\n};\r\n\r\ndescribe('Groups Page', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n    mockPush.mockClear();\r\n    useRouter.mockReturnValue(mockRouter);\r\n    getCurrentUser.mockReturnValue(mockUser);\r\n    showToast.mockImplementation(() => {});\r\n    \r\n    // Reset localStorage mock\r\n    if (typeof window !== 'undefined' && window.localStorage) {\r\n      window.localStorage.clear();\r\n    }\r\n  });\r\n\r\n  it('renders groups page with header', async () => {\r\n    render(<GroupsPage />);\r\n    await waitFor(() => {\r\n      expect(screen.getByText(/Interest Groups/i)).toBeInTheDocument();\r\n    }, { timeout: 3000 });\r\n  });\r\n\r\n  it('displays search input', async () => {\r\n    render(<GroupsPage />);\r\n    await waitFor(() => {\r\n      const searchInput = screen.getByPlaceholderText(/Search groups/i);\r\n      expect(searchInput).toBeInTheDocument();\r\n    }, { timeout: 3000 });\r\n  });\r\n\r\n  it('filters groups by search query', async () => {\r\n    render(<GroupsPage />);\r\n    const searchInput = screen.getByPlaceholderText(/Search groups/i);\r\n    \r\n    fireEvent.change(searchInput, { target: { value: 'Music' } });\r\n    \r\n    await waitFor(() => {\r\n      expect(screen.getByText(/Music Lovers/i)).toBeInTheDocument();\r\n    });\r\n  });\r\n\r\n  it('displays category filter buttons', async () => {\r\n    render(<GroupsPage />);\r\n    await waitFor(() => {\r\n      expect(screen.getByText(/All/i)).toBeInTheDocument();\r\n    }, { timeout: 3000 });\r\n  });\r\n\r\n  it('handles join group button click', async () => {\r\n    render(<GroupsPage />);\r\n    \r\n    await waitFor(() => {\r\n      const joinButtons = screen.getAllByText(/Join/i);\r\n      if (joinButtons.length > 0) {\r\n        fireEvent.click(joinButtons[0]);\r\n        expect(showToast).toHaveBeenCalled();\r\n      }\r\n    });\r\n  });\r\n\r\n  it('handles leave group button click', async () => {\r\n    render(<GroupsPage />);\r\n    \r\n    await waitFor(() => {\r\n      const leaveButtons = screen.queryAllByText(/Leave/i);\r\n      if (leaveButtons.length > 0) {\r\n        fireEvent.click(leaveButtons[0]);\r\n        expect(showToast).toHaveBeenCalledWith(\r\n          expect.stringContaining('Left group'),\r\n          'success'\r\n        );\r\n      }\r\n    });\r\n  });\r\n\r\n  it('navigates to create group page', async () => {\r\n    render(<GroupsPage />);\r\n    \r\n    await waitFor(() => {\r\n      const createButton = screen.getByText(/Create Group/i);\r\n      fireEvent.click(createButton);\r\n      expect(mockPush).toHaveBeenCalledWith('/groups/create');\r\n    });\r\n  });\r\n\r\n  it('navigates to group detail page on card click', async () => {\r\n    render(<GroupsPage />);\r\n    \r\n    await waitFor(() => {\r\n      const groupCards = screen.getAllByText(/Music Lovers|Fitness Enthusiasts|Travel Buddies/i);\r\n      if (groupCards.length > 0) {\r\n        fireEvent.click(groupCards[0].closest('[class*=\"cursor-pointer\"]'));\r\n        expect(mockPush).toHaveBeenCalledWith(expect.stringContaining('/groups/'));\r\n      }\r\n    });\r\n  });\r\n\r\n  it('displays pagination controls when multiple pages', async () => {\r\n    render(<GroupsPage />);\r\n    \r\n    await waitFor(() => {\r\n      const paginationButtons = screen.queryAllByText(/Previous|Next|1|2/i);\r\n      // Pagination may or may not appear depending on data\r\n      expect(paginationButtons.length).toBeGreaterThanOrEqual(0);\r\n    });\r\n  });\r\n\r\n  it('handles empty groups array gracefully', async () => {\r\n    getCurrentUser.mockReturnValue(mockUser);\r\n    render(<GroupsPage />);\r\n    \r\n    // Should not crash with empty data\r\n    await waitFor(() => {\r\n      expect(screen.getByText(/Interest Groups/i)).toBeInTheDocument();\r\n    });\r\n  });\r\n\r\n  it('redirects to login if user not authenticated', () => {\r\n    getCurrentUser.mockReturnValue(null);\r\n    render(<GroupsPage />);\r\n    \r\n    expect(mockPush).toHaveBeenCalledWith('/login');\r\n  });\r\n\r\n  it('displays My Groups section when user has joined groups', async () => {\r\n    render(<GroupsPage />);\r\n    \r\n    await waitFor(() => {\r\n      const myGroupsSection = screen.queryByText(/My Groups/i);\r\n      // May or may not appear depending on mock data\r\n      expect(myGroupsSection !== null || screen.getByText(/Discover Groups/i)).toBeTruthy();\r\n    });\r\n  });\r\n\r\n  it('handles category filter change', async () => {\r\n    render(<GroupsPage />);\r\n    \r\n    await waitFor(() => {\r\n      const allButton = screen.getByText(/All/i);\r\n      fireEvent.click(allButton);\r\n      // Should update filtered results\r\n      expect(allButton).toBeInTheDocument();\r\n    });\r\n  });\r\n});\r\n\r\n"],"names":["jest","mock","useRouter","fn","useSearchParams","URLSearchParams","usePathname","Card","children","className","onClick","div","data-testid","Button","disabled","variant","button","Input","placeholder","value","onChange","input","mockPush","mockRouter","push","back","replace","mockUser","id","name","email","subscriptionTier","describe","beforeEach","clearAllMocks","mockClear","mockReturnValue","getCurrentUser","showToast","mockImplementation","window","localStorage","clear","it","render","GroupsPage","waitFor","expect","screen","getByText","toBeInTheDocument","timeout","searchInput","getByPlaceholderText","fireEvent","change","target","joinButtons","getAllByText","length","click","toHaveBeenCalled","leaveButtons","queryAllByText","toHaveBeenCalledWith","stringContaining","createButton","groupCards","closest","paginationButtons","toBeGreaterThanOrEqual","myGroupsSection","queryByText","toBeTruthy","allButton"],"mappings":"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"}