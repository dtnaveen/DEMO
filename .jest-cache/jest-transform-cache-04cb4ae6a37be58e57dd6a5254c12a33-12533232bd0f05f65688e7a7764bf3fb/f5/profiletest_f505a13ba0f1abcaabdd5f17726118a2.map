{"version":3,"sources":["D:\\Tech Vitta\\Apps\\DEMO\\__tests__\\pages\\profile.test.js"],"sourcesContent":["/**\r\n * Profile Page Tests\r\n * Tests for Profile page functionality\r\n */\r\n\r\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\r\nimport { useRouter } from 'next/navigation';\r\nimport ProfilePage from '@/app/profile/page';\r\nimport { getCurrentUser, setCurrentUser, getAllUsers, setAllUsers, clearCurrentUser } from '@/lib/localStorage';\r\nimport { showToast } from '@/utils/helpers';\r\n\r\n// Mock dependencies\r\njest.mock('next/navigation', () => ({\r\n  useRouter: jest.fn(),\r\n  useSearchParams: jest.fn(() => new URLSearchParams()),\r\n  usePathname: jest.fn(() => '/profile'),\r\n}));\r\njest.mock('@/lib/localStorage');\r\njest.mock('@/utils/helpers');\r\njest.mock('@/components/ui/Card', () => {\r\n  return function Card({ children, className, onClick }) {\r\n    return <div className={className} onClick={onClick} data-testid=\"card\">{children}</div>;\r\n  };\r\n});\r\njest.mock('@/components/ui/Button', () => {\r\n  return function Button({ children, onClick, disabled, className, variant }) {\r\n    return <button onClick={onClick} disabled={disabled} className={className} data-testid=\"button\">{children}</button>;\r\n  };\r\n});\r\njest.mock('@/components/ui/Input', () => {\r\n  return function Input({ label, placeholder, value, onChange, type, className, error }) {\r\n    return (\r\n      <div className={className}>\r\n        {label && <label>{label}</label>}\r\n        <input type={type} placeholder={placeholder} value={value} onChange={onChange} data-testid=\"input\" />\r\n        {error && <p>{error}</p>}\r\n      </div>\r\n    );\r\n  };\r\n});\r\njest.mock('@/components/ui/PhotoUpload', () => {\r\n  return function PhotoUpload({ photos, onPhotosChange }) {\r\n    return <div data-testid=\"photo-upload\">Photo Upload ({photos?.length || 0} photos)</div>;\r\n  };\r\n});\r\njest.mock('@/components/ui/PhotoVerification', () => {\r\n  return function PhotoVerification({ isOpen, onClose }) {\r\n    return isOpen ? <div data-testid=\"photo-verification\">Photo Verification</div> : null;\r\n  };\r\n});\r\njest.mock('@/components/ui/SocialMediaIntegration', () => {\r\n  return function SocialMediaIntegration() {\r\n    return <div data-testid=\"social-media\">Social Media Integration</div>;\r\n  };\r\n});\r\n\r\nconst mockPush = jest.fn();\r\nconst mockRouter = {\r\n  push: mockPush,\r\n  back: jest.fn(),\r\n  replace: jest.fn(),\r\n};\r\n\r\nconst mockUser = {\r\n  id: 'user1',\r\n  name: 'Test User',\r\n  email: 'test@example.com',\r\n  age: 25,\r\n  location: 'New York',\r\n  bio: 'Test bio',\r\n  photos: [],\r\n  subscriptionTier: 'free',\r\n};\r\n\r\ndescribe('Profile Page', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n    mockPush.mockClear();\r\n    useRouter.mockReturnValue(mockRouter);\r\n    getCurrentUser.mockReturnValue(mockUser);\r\n    getAllUsers.mockReturnValue([mockUser]);\r\n    setCurrentUser.mockImplementation(() => {});\r\n    setAllUsers.mockImplementation(() => {});\r\n    clearCurrentUser.mockImplementation(() => {});\r\n    showToast.mockImplementation(() => {});\r\n    \r\n    // Mock window.confirm\r\n    window.confirm = jest.fn(() => true);\r\n    \r\n    // Reset localStorage mock\r\n    if (typeof window !== 'undefined' && window.localStorage) {\r\n      window.localStorage.clear();\r\n    }\r\n  });\r\n\r\n  it('renders profile page with user name', async () => {\r\n    render(<ProfilePage />);\r\n    await waitFor(() => {\r\n      expect(screen.getByText(/My Profile/i)).toBeInTheDocument();\r\n    });\r\n  });\r\n\r\n  it('displays user information', async () => {\r\n    render(<ProfilePage />);\r\n    await waitFor(() => {\r\n      expect(screen.getByText(mockUser.name)).toBeInTheDocument();\r\n    });\r\n  });\r\n\r\n  it('shows edit profile button', () => {\r\n    render(<ProfilePage />);\r\n    const editButton = screen.getByText(/Edit Profile/i);\r\n    expect(editButton).toBeInTheDocument();\r\n  });\r\n\r\n  it('enters edit mode when edit button clicked', () => {\r\n    render(<ProfilePage />);\r\n    const editButton = screen.getByText(/Edit Profile/i);\r\n    fireEvent.click(editButton);\r\n    \r\n    expect(screen.getByText(/Save/i)).toBeInTheDocument();\r\n  });\r\n\r\n  it('displays logout button in header', () => {\r\n    render(<ProfilePage />);\r\n    const logoutButtons = screen.getAllByText(/Logout/i);\r\n    expect(logoutButtons.length).toBeGreaterThan(0);\r\n  });\r\n\r\n  it('displays logout section in Security area', () => {\r\n    render(<ProfilePage />);\r\n    expect(screen.getByText(/Security/i)).toBeInTheDocument();\r\n    expect(screen.getByText(/Log out of your account/i)).toBeInTheDocument();\r\n  });\r\n\r\n  it('handles logout button click with confirmation', () => {\r\n    render(<ProfilePage />);\r\n    const logoutButton = screen.getAllByText(/Logout/i)[0];\r\n    \r\n    fireEvent.click(logoutButton);\r\n    \r\n    expect(window.confirm).toHaveBeenCalled();\r\n    expect(clearCurrentUser).toHaveBeenCalled();\r\n    expect(showToast).toHaveBeenCalledWith('Logged out successfully', 'success');\r\n    expect(mockPush).toHaveBeenCalledWith('/');\r\n  });\r\n\r\n  it('does not logout if user cancels confirmation', () => {\r\n    window.confirm.mockReturnValue(false);\r\n    \r\n    render(<ProfilePage />);\r\n    const logoutButton = screen.getAllByText(/Logout/i)[0];\r\n    \r\n    fireEvent.click(logoutButton);\r\n    \r\n    expect(clearCurrentUser).not.toHaveBeenCalled();\r\n  });\r\n\r\n  it('saves profile changes', async () => {\r\n    render(<ProfilePage />);\r\n    const editButton = screen.getByText(/Edit Profile/i);\r\n    fireEvent.click(editButton);\r\n    \r\n    await waitFor(() => {\r\n      const nameInput = screen.getByDisplayValue(mockUser.name);\r\n      fireEvent.change(nameInput, { target: { value: 'Updated Name' } });\r\n      \r\n      const saveButton = screen.getByText(/Save/i);\r\n      fireEvent.click(saveButton);\r\n      \r\n      expect(setCurrentUser).toHaveBeenCalled();\r\n      expect(showToast).toHaveBeenCalledWith('Profile updated successfully!', 'success');\r\n    });\r\n  });\r\n\r\n  it('cancels profile editing', () => {\r\n    render(<ProfilePage />);\r\n    const editButton = screen.getByText(/Edit Profile/i);\r\n    fireEvent.click(editButton);\r\n    \r\n    const cancelButton = screen.getByText(/Cancel/i);\r\n    fireEvent.click(cancelButton);\r\n    \r\n    expect(screen.getByText(/Edit Profile/i)).toBeInTheDocument();\r\n  });\r\n\r\n  it('displays change password button', () => {\r\n    render(<ProfilePage />);\r\n    const changePasswordButton = screen.queryByText(/Change Password|Set Password/i);\r\n    expect(changePasswordButton).toBeInTheDocument();\r\n  });\r\n\r\n  it('opens password change form', () => {\r\n    render(<ProfilePage />);\r\n    const changePasswordButton = screen.getByText(/Change Password|Set Password/i);\r\n    fireEvent.click(changePasswordButton);\r\n    \r\n    expect(screen.getByText(/Current Password|Password/i)).toBeInTheDocument();\r\n  });\r\n\r\n  it('displays user email', () => {\r\n    render(<ProfilePage />);\r\n    expect(screen.getByText(mockUser.email)).toBeInTheDocument();\r\n  });\r\n\r\n  it('displays user location', () => {\r\n    render(<ProfilePage />);\r\n    expect(screen.getByText(mockUser.location)).toBeInTheDocument();\r\n  });\r\n\r\n  it('displays user bio', () => {\r\n    render(<ProfilePage />);\r\n    expect(screen.getByText(mockUser.bio)).toBeInTheDocument();\r\n  });\r\n\r\n  it('redirects to onboard if user not authenticated', () => {\r\n    getCurrentUser.mockReturnValue(null);\r\n    render(<ProfilePage />);\r\n    \r\n    expect(mockPush).toHaveBeenCalledWith('/onboard');\r\n  });\r\n\r\n  it('handles form validation errors', async () => {\r\n    render(<ProfilePage />);\r\n    const editButton = screen.getByText(/Edit Profile/i);\r\n    fireEvent.click(editButton);\r\n    \r\n    await waitFor(() => {\r\n      const emailInput = screen.queryByLabelText(/Email/i);\r\n      if (emailInput) {\r\n        fireEvent.change(emailInput, { target: { value: 'invalid-email' } });\r\n        fireEvent.blur(emailInput);\r\n        // Should show validation error\r\n      }\r\n    });\r\n  });\r\n});\r\n\r\n"],"names":["jest","mock","useRouter","fn","useSearchParams","URLSearchParams","usePathname","Card","children","className","onClick","div","data-testid","Button","disabled","variant","button","Input","label","placeholder","value","onChange","type","error","input","p","PhotoUpload","photos","onPhotosChange","length","PhotoVerification","isOpen","onClose","SocialMediaIntegration","mockPush","mockRouter","push","back","replace","mockUser","id","name","email","age","location","bio","subscriptionTier","describe","beforeEach","clearAllMocks","mockClear","mockReturnValue","getCurrentUser","getAllUsers","setCurrentUser","mockImplementation","setAllUsers","clearCurrentUser","showToast","window","confirm","localStorage","clear","it","render","ProfilePage","waitFor","expect","screen","getByText","toBeInTheDocument","editButton","fireEvent","click","logoutButtons","getAllByText","toBeGreaterThan","logoutButton","toHaveBeenCalled","toHaveBeenCalledWith","not","nameInput","getByDisplayValue","change","target","saveButton","cancelButton","changePasswordButton","queryByText","emailInput","queryByLabelText","blur"],"mappings":"AAAA;;;CAGC;AAQD,oBAAoB;AACpBA,KAAKC,IAAI,CAAC,mBAAmB,IAAO,CAAA;QAClCC,WAAWF,KAAKG,EAAE;QAClBC,iBAAiBJ,KAAKG,EAAE,CAAC,IAAM,IAAIE;QACnCC,aAAaN,KAAKG,EAAE,CAAC,IAAM;IAC7B,CAAA;AACAH,KAAKC,IAAI,CAAC;AACVD,KAAKC,IAAI,CAAC;AACVD,KAAKC,IAAI,CAAC,wBAAwB;IAChC,OAAO,SAASM,KAAK,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,OAAO,EAAE;QACnD,qBAAO,qBAACC;YAAIF,WAAWA;YAAWC,SAASA;YAASE,eAAY;sBAAQJ;;IAC1E;AACF;AACAR,KAAKC,IAAI,CAAC,0BAA0B;IAClC,OAAO,SAASY,OAAO,EAAEL,QAAQ,EAAEE,OAAO,EAAEI,QAAQ,EAAEL,SAAS,EAAEM,OAAO,EAAE;QACxE,qBAAO,qBAACC;YAAON,SAASA;YAASI,UAAUA;YAAUL,WAAWA;YAAWG,eAAY;sBAAUJ;;IACnG;AACF;AACAR,KAAKC,IAAI,CAAC,yBAAyB;IACjC,OAAO,SAASgB,MAAM,EAAEC,KAAK,EAAEC,WAAW,EAAEC,KAAK,EAAEC,QAAQ,EAAEC,IAAI,EAAEb,SAAS,EAAEc,KAAK,EAAE;QACnF,qBACE,sBAACZ;YAAIF,WAAWA;;gBACbS,uBAAS,qBAACA;8BAAOA;;8BAClB,qBAACM;oBAAMF,MAAMA;oBAAMH,aAAaA;oBAAaC,OAAOA;oBAAOC,UAAUA;oBAAUT,eAAY;;gBAC1FW,uBAAS,qBAACE;8BAAGF;;;;IAGpB;AACF;AACAvB,KAAKC,IAAI,CAAC,+BAA+B;IACvC,OAAO,SAASyB,YAAY,EAAEC,MAAM,EAAEC,cAAc,EAAE;QACpD,qBAAO,sBAACjB;YAAIC,eAAY;;gBAAe;gBAAee,QAAQE,UAAU;gBAAE;;;IAC5E;AACF;AACA7B,KAAKC,IAAI,CAAC,qCAAqC;IAC7C,OAAO,SAAS6B,kBAAkB,EAAEC,MAAM,EAAEC,OAAO,EAAE;QACnD,OAAOD,uBAAS,qBAACpB;YAAIC,eAAY;sBAAqB;aAA2B;IACnF;AACF;AACAZ,KAAKC,IAAI,CAAC,0CAA0C;IAClD,OAAO,SAASgC;QACd,qBAAO,qBAACtB;YAAIC,eAAY;sBAAe;;IACzC;AACF;;;;;uBAjDmD;4BACzB;6DACF;8BACmE;yBACjE;;;;;;AA+C1B,MAAMsB,WAAWlC,KAAKG,EAAE;AACxB,MAAMgC,aAAa;IACjBC,MAAMF;IACNG,MAAMrC,KAAKG,EAAE;IACbmC,SAAStC,KAAKG,EAAE;AAClB;AAEA,MAAMoC,WAAW;IACfC,IAAI;IACJC,MAAM;IACNC,OAAO;IACPC,KAAK;IACLC,UAAU;IACVC,KAAK;IACLlB,QAAQ,EAAE;IACVmB,kBAAkB;AACpB;AAEAC,SAAS,gBAAgB;IACvBC,WAAW;QACThD,KAAKiD,aAAa;QAClBf,SAASgB,SAAS;QAClBhD,qBAAS,CAACiD,eAAe,CAAChB;QAC1BiB,4BAAc,CAACD,eAAe,CAACZ;QAC/Bc,yBAAW,CAACF,eAAe,CAAC;YAACZ;SAAS;QACtCe,4BAAc,CAACC,kBAAkB,CAAC,KAAO;QACzCC,yBAAW,CAACD,kBAAkB,CAAC,KAAO;QACtCE,8BAAgB,CAACF,kBAAkB,CAAC,KAAO;QAC3CG,kBAAS,CAACH,kBAAkB,CAAC,KAAO;QAEpC,sBAAsB;QACtBI,OAAOC,OAAO,GAAG5D,KAAKG,EAAE,CAAC,IAAM;QAE/B,0BAA0B;QAC1B,IAAI,OAAOwD,WAAW,eAAeA,OAAOE,YAAY,EAAE;YACxDF,OAAOE,YAAY,CAACC,KAAK;QAC3B;IACF;IAEAC,GAAG,uCAAuC;QACxCC,IAAAA,aAAM,gBAAC,qBAACC,aAAW;QACnB,MAAMC,IAAAA,cAAO,EAAC;YACZC,OAAOC,aAAM,CAACC,SAAS,CAAC,gBAAgBC,iBAAiB;QAC3D;IACF;IAEAP,GAAG,6BAA6B;QAC9BC,IAAAA,aAAM,gBAAC,qBAACC,aAAW;QACnB,MAAMC,IAAAA,cAAO,EAAC;YACZC,OAAOC,aAAM,CAACC,SAAS,CAAC9B,SAASE,IAAI,GAAG6B,iBAAiB;QAC3D;IACF;IAEAP,GAAG,6BAA6B;QAC9BC,IAAAA,aAAM,gBAAC,qBAACC,aAAW;QACnB,MAAMM,aAAaH,aAAM,CAACC,SAAS,CAAC;QACpCF,OAAOI,YAAYD,iBAAiB;IACtC;IAEAP,GAAG,6CAA6C;QAC9CC,IAAAA,aAAM,gBAAC,qBAACC,aAAW;QACnB,MAAMM,aAAaH,aAAM,CAACC,SAAS,CAAC;QACpCG,gBAAS,CAACC,KAAK,CAACF;QAEhBJ,OAAOC,aAAM,CAACC,SAAS,CAAC,UAAUC,iBAAiB;IACrD;IAEAP,GAAG,oCAAoC;QACrCC,IAAAA,aAAM,gBAAC,qBAACC,aAAW;QACnB,MAAMS,gBAAgBN,aAAM,CAACO,YAAY,CAAC;QAC1CR,OAAOO,cAAc7C,MAAM,EAAE+C,eAAe,CAAC;IAC/C;IAEAb,GAAG,4CAA4C;QAC7CC,IAAAA,aAAM,gBAAC,qBAACC,aAAW;QACnBE,OAAOC,aAAM,CAACC,SAAS,CAAC,cAAcC,iBAAiB;QACvDH,OAAOC,aAAM,CAACC,SAAS,CAAC,6BAA6BC,iBAAiB;IACxE;IAEAP,GAAG,iDAAiD;QAClDC,IAAAA,aAAM,gBAAC,qBAACC,aAAW;QACnB,MAAMY,eAAeT,aAAM,CAACO,YAAY,CAAC,UAAU,CAAC,EAAE;QAEtDH,gBAAS,CAACC,KAAK,CAACI;QAEhBV,OAAOR,OAAOC,OAAO,EAAEkB,gBAAgB;QACvCX,OAAOV,8BAAgB,EAAEqB,gBAAgB;QACzCX,OAAOT,kBAAS,EAAEqB,oBAAoB,CAAC,2BAA2B;QAClEZ,OAAOjC,UAAU6C,oBAAoB,CAAC;IACxC;IAEAhB,GAAG,gDAAgD;QACjDJ,OAAOC,OAAO,CAACT,eAAe,CAAC;QAE/Ba,IAAAA,aAAM,gBAAC,qBAACC,aAAW;QACnB,MAAMY,eAAeT,aAAM,CAACO,YAAY,CAAC,UAAU,CAAC,EAAE;QAEtDH,gBAAS,CAACC,KAAK,CAACI;QAEhBV,OAAOV,8BAAgB,EAAEuB,GAAG,CAACF,gBAAgB;IAC/C;IAEAf,GAAG,yBAAyB;QAC1BC,IAAAA,aAAM,gBAAC,qBAACC,aAAW;QACnB,MAAMM,aAAaH,aAAM,CAACC,SAAS,CAAC;QACpCG,gBAAS,CAACC,KAAK,CAACF;QAEhB,MAAML,IAAAA,cAAO,EAAC;YACZ,MAAMe,YAAYb,aAAM,CAACc,iBAAiB,CAAC3C,SAASE,IAAI;YACxD+B,gBAAS,CAACW,MAAM,CAACF,WAAW;gBAAEG,QAAQ;oBAAEhE,OAAO;gBAAe;YAAE;YAEhE,MAAMiE,aAAajB,aAAM,CAACC,SAAS,CAAC;YACpCG,gBAAS,CAACC,KAAK,CAACY;YAEhBlB,OAAOb,4BAAc,EAAEwB,gBAAgB;YACvCX,OAAOT,kBAAS,EAAEqB,oBAAoB,CAAC,iCAAiC;QAC1E;IACF;IAEAhB,GAAG,2BAA2B;QAC5BC,IAAAA,aAAM,gBAAC,qBAACC,aAAW;QACnB,MAAMM,aAAaH,aAAM,CAACC,SAAS,CAAC;QACpCG,gBAAS,CAACC,KAAK,CAACF;QAEhB,MAAMe,eAAelB,aAAM,CAACC,SAAS,CAAC;QACtCG,gBAAS,CAACC,KAAK,CAACa;QAEhBnB,OAAOC,aAAM,CAACC,SAAS,CAAC,kBAAkBC,iBAAiB;IAC7D;IAEAP,GAAG,mCAAmC;QACpCC,IAAAA,aAAM,gBAAC,qBAACC,aAAW;QACnB,MAAMsB,uBAAuBnB,aAAM,CAACoB,WAAW,CAAC;QAChDrB,OAAOoB,sBAAsBjB,iBAAiB;IAChD;IAEAP,GAAG,8BAA8B;QAC/BC,IAAAA,aAAM,gBAAC,qBAACC,aAAW;QACnB,MAAMsB,uBAAuBnB,aAAM,CAACC,SAAS,CAAC;QAC9CG,gBAAS,CAACC,KAAK,CAACc;QAEhBpB,OAAOC,aAAM,CAACC,SAAS,CAAC,+BAA+BC,iBAAiB;IAC1E;IAEAP,GAAG,uBAAuB;QACxBC,IAAAA,aAAM,gBAAC,qBAACC,aAAW;QACnBE,OAAOC,aAAM,CAACC,SAAS,CAAC9B,SAASG,KAAK,GAAG4B,iBAAiB;IAC5D;IAEAP,GAAG,0BAA0B;QAC3BC,IAAAA,aAAM,gBAAC,qBAACC,aAAW;QACnBE,OAAOC,aAAM,CAACC,SAAS,CAAC9B,SAASK,QAAQ,GAAG0B,iBAAiB;IAC/D;IAEAP,GAAG,qBAAqB;QACtBC,IAAAA,aAAM,gBAAC,qBAACC,aAAW;QACnBE,OAAOC,aAAM,CAACC,SAAS,CAAC9B,SAASM,GAAG,GAAGyB,iBAAiB;IAC1D;IAEAP,GAAG,kDAAkD;QACnDX,4BAAc,CAACD,eAAe,CAAC;QAC/Ba,IAAAA,aAAM,gBAAC,qBAACC,aAAW;QAEnBE,OAAOjC,UAAU6C,oBAAoB,CAAC;IACxC;IAEAhB,GAAG,kCAAkC;QACnCC,IAAAA,aAAM,gBAAC,qBAACC,aAAW;QACnB,MAAMM,aAAaH,aAAM,CAACC,SAAS,CAAC;QACpCG,gBAAS,CAACC,KAAK,CAACF;QAEhB,MAAML,IAAAA,cAAO,EAAC;YACZ,MAAMuB,aAAarB,aAAM,CAACsB,gBAAgB,CAAC;YAC3C,IAAID,YAAY;gBACdjB,gBAAS,CAACW,MAAM,CAACM,YAAY;oBAAEL,QAAQ;wBAAEhE,OAAO;oBAAgB;gBAAE;gBAClEoD,gBAAS,CAACmB,IAAI,CAACF;YACf,+BAA+B;YACjC;QACF;IACF;AACF"}