be84e9e2108980cb2e292868f23f4c6d
"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _localStorage = require("../../lib/localStorage.js");
// Mock localStorage
const localStorageMock = (()=>{
    let store = {};
    return {
        getItem: jest.fn((key)=>store[key] || null),
        setItem: jest.fn((key, value)=>{
            store[key] = value.toString();
        }),
        removeItem: jest.fn((key)=>{
            delete store[key];
        }),
        clear: jest.fn(()=>{
            store = {};
        })
    };
})();
beforeEach(()=>{
    // Ensure window exists
    if (typeof window === 'undefined') {
        global.window = {};
    }
    Object.defineProperty(window, 'localStorage', {
        value: localStorageMock,
        writable: true,
        configurable: true
    });
    localStorageMock.clear();
});
describe('User Actions', ()=>{
    describe('getUserActions', ()=>{
        it('returns default actions when none exist', ()=>{
            const actions = (0, _localStorage.getUserActions)();
            expect(actions).toEqual({
                likes: [],
                passes: []
            });
        });
        it('returns stored actions', ()=>{
            const storedActions = {
                likes: [
                    '1',
                    '2'
                ],
                passes: [
                    '3'
                ]
            };
            localStorageMock.setItem('userActions', JSON.stringify(storedActions));
            const actions = (0, _localStorage.getUserActions)();
            expect(actions).toEqual(storedActions);
        });
    });
    describe('setUserActions', ()=>{
        it('saves actions to localStorage', ()=>{
            const actions = {
                likes: [
                    '1'
                ],
                passes: [
                    '2'
                ]
            };
            (0, _localStorage.setUserActions)(actions);
            expect(localStorageMock.setItem).toHaveBeenCalledWith('userActions', JSON.stringify(actions));
        });
    });
    describe('addLike', ()=>{
        it('adds user ID to likes', ()=>{
            (0, _localStorage.addLike)('user1');
            const actions = (0, _localStorage.getUserActions)();
            expect(actions.likes).toContain('user1');
        });
        it('does not add duplicate likes', ()=>{
            (0, _localStorage.addLike)('user1');
            (0, _localStorage.addLike)('user1');
            const actions = (0, _localStorage.getUserActions)();
            expect(actions.likes.filter((id)=>id === 'user1').length).toBe(1);
        });
    });
    describe('addPass', ()=>{
        it('adds user ID to passes', ()=>{
            (0, _localStorage.addPass)('user1');
            const actions = (0, _localStorage.getUserActions)();
            expect(actions.passes).toContain('user1');
        });
        it('does not add duplicate passes', ()=>{
            (0, _localStorage.addPass)('user1');
            (0, _localStorage.addPass)('user1');
            const actions = (0, _localStorage.getUserActions)();
            expect(actions.passes.filter((id)=>id === 'user1').length).toBe(1);
        });
    });
    describe('isLiked', ()=>{
        it('returns true for liked user', ()=>{
            (0, _localStorage.addLike)('user1');
            expect((0, _localStorage.isLiked)('user1')).toBe(true);
        });
        it('returns false for not liked user', ()=>{
            expect((0, _localStorage.isLiked)('user1')).toBe(false);
        });
    });
    describe('isPassed', ()=>{
        it('returns true for passed user', ()=>{
            (0, _localStorage.addPass)('user1');
            expect((0, _localStorage.isPassed)('user1')).toBe(true);
        });
        it('returns false for not passed user', ()=>{
            expect((0, _localStorage.isPassed)('user1')).toBe(false);
        });
    });
    describe('getLikes', ()=>{
        it('returns all liked user IDs', ()=>{
            (0, _localStorage.addLike)('user1');
            (0, _localStorage.addLike)('user2');
            const likes = (0, _localStorage.getLikes)();
            expect(likes).toContain('user1');
            expect(likes).toContain('user2');
        });
        it('returns empty array when no likes', ()=>{
            const likes = (0, _localStorage.getLikes)();
            expect(likes).toEqual([]);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFxUZWNoIFZpdHRhXFxBcHBzXFxERU1PXFxfX3Rlc3RzX19cXGxpYlxcdXNlckFjdGlvbnMudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xyXG4gIGdldFVzZXJBY3Rpb25zLFxyXG4gIHNldFVzZXJBY3Rpb25zLFxyXG4gIGFkZExpa2UsXHJcbiAgYWRkUGFzcyxcclxuICBpc0xpa2VkLFxyXG4gIGlzUGFzc2VkLFxyXG4gIGdldExpa2VzXHJcbn0gZnJvbSAnQC9saWIvbG9jYWxTdG9yYWdlJ1xyXG5cclxuLy8gTW9jayBsb2NhbFN0b3JhZ2VcclxuY29uc3QgbG9jYWxTdG9yYWdlTW9jayA9ICgoKSA9PiB7XHJcbiAgbGV0IHN0b3JlID0ge31cclxuICByZXR1cm4ge1xyXG4gICAgZ2V0SXRlbTogamVzdC5mbigoa2V5KSA9PiBzdG9yZVtrZXldIHx8IG51bGwpLFxyXG4gICAgc2V0SXRlbTogamVzdC5mbigoa2V5LCB2YWx1ZSkgPT4ge1xyXG4gICAgICBzdG9yZVtrZXldID0gdmFsdWUudG9TdHJpbmcoKVxyXG4gICAgfSksXHJcbiAgICByZW1vdmVJdGVtOiBqZXN0LmZuKChrZXkpID0+IHtcclxuICAgICAgZGVsZXRlIHN0b3JlW2tleV1cclxuICAgIH0pLFxyXG4gICAgY2xlYXI6IGplc3QuZm4oKCkgPT4ge1xyXG4gICAgICBzdG9yZSA9IHt9XHJcbiAgICB9KSxcclxuICB9XHJcbn0pKClcclxuXHJcbmJlZm9yZUVhY2goKCkgPT4ge1xyXG4gIC8vIEVuc3VyZSB3aW5kb3cgZXhpc3RzXHJcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICBnbG9iYWwud2luZG93ID0ge307XHJcbiAgfVxyXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW5kb3csICdsb2NhbFN0b3JhZ2UnLCB7XHJcbiAgICB2YWx1ZTogbG9jYWxTdG9yYWdlTW9jayxcclxuICAgIHdyaXRhYmxlOiB0cnVlLFxyXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxyXG4gIH0pXHJcbiAgbG9jYWxTdG9yYWdlTW9jay5jbGVhcigpXHJcbn0pXHJcblxyXG5kZXNjcmliZSgnVXNlciBBY3Rpb25zJywgKCkgPT4ge1xyXG4gIGRlc2NyaWJlKCdnZXRVc2VyQWN0aW9ucycsICgpID0+IHtcclxuICAgIGl0KCdyZXR1cm5zIGRlZmF1bHQgYWN0aW9ucyB3aGVuIG5vbmUgZXhpc3QnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGFjdGlvbnMgPSBnZXRVc2VyQWN0aW9ucygpXHJcbiAgICAgIGV4cGVjdChhY3Rpb25zKS50b0VxdWFsKHsgbGlrZXM6IFtdLCBwYXNzZXM6IFtdIH0pXHJcbiAgICB9KVxyXG5cclxuICAgIGl0KCdyZXR1cm5zIHN0b3JlZCBhY3Rpb25zJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBzdG9yZWRBY3Rpb25zID0geyBsaWtlczogWycxJywgJzInXSwgcGFzc2VzOiBbJzMnXSB9XHJcbiAgICAgIGxvY2FsU3RvcmFnZU1vY2suc2V0SXRlbSgndXNlckFjdGlvbnMnLCBKU09OLnN0cmluZ2lmeShzdG9yZWRBY3Rpb25zKSlcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGFjdGlvbnMgPSBnZXRVc2VyQWN0aW9ucygpXHJcbiAgICAgIGV4cGVjdChhY3Rpb25zKS50b0VxdWFsKHN0b3JlZEFjdGlvbnMpXHJcbiAgICB9KVxyXG4gIH0pXHJcblxyXG4gIGRlc2NyaWJlKCdzZXRVc2VyQWN0aW9ucycsICgpID0+IHtcclxuICAgIGl0KCdzYXZlcyBhY3Rpb25zIHRvIGxvY2FsU3RvcmFnZScsICgpID0+IHtcclxuICAgICAgY29uc3QgYWN0aW9ucyA9IHsgbGlrZXM6IFsnMSddLCBwYXNzZXM6IFsnMiddIH1cclxuICAgICAgc2V0VXNlckFjdGlvbnMoYWN0aW9ucylcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChsb2NhbFN0b3JhZ2VNb2NrLnNldEl0ZW0pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxyXG4gICAgICAgICd1c2VyQWN0aW9ucycsXHJcbiAgICAgICAgSlNPTi5zdHJpbmdpZnkoYWN0aW9ucylcclxuICAgICAgKVxyXG4gICAgfSlcclxuICB9KVxyXG5cclxuICBkZXNjcmliZSgnYWRkTGlrZScsICgpID0+IHtcclxuICAgIGl0KCdhZGRzIHVzZXIgSUQgdG8gbGlrZXMnLCAoKSA9PiB7XHJcbiAgICAgIGFkZExpa2UoJ3VzZXIxJylcclxuICAgICAgY29uc3QgYWN0aW9ucyA9IGdldFVzZXJBY3Rpb25zKClcclxuICAgICAgZXhwZWN0KGFjdGlvbnMubGlrZXMpLnRvQ29udGFpbigndXNlcjEnKVxyXG4gICAgfSlcclxuXHJcbiAgICBpdCgnZG9lcyBub3QgYWRkIGR1cGxpY2F0ZSBsaWtlcycsICgpID0+IHtcclxuICAgICAgYWRkTGlrZSgndXNlcjEnKVxyXG4gICAgICBhZGRMaWtlKCd1c2VyMScpXHJcbiAgICAgIGNvbnN0IGFjdGlvbnMgPSBnZXRVc2VyQWN0aW9ucygpXHJcbiAgICAgIGV4cGVjdChhY3Rpb25zLmxpa2VzLmZpbHRlcihpZCA9PiBpZCA9PT0gJ3VzZXIxJykubGVuZ3RoKS50b0JlKDEpXHJcbiAgICB9KVxyXG4gIH0pXHJcblxyXG4gIGRlc2NyaWJlKCdhZGRQYXNzJywgKCkgPT4ge1xyXG4gICAgaXQoJ2FkZHMgdXNlciBJRCB0byBwYXNzZXMnLCAoKSA9PiB7XHJcbiAgICAgIGFkZFBhc3MoJ3VzZXIxJylcclxuICAgICAgY29uc3QgYWN0aW9ucyA9IGdldFVzZXJBY3Rpb25zKClcclxuICAgICAgZXhwZWN0KGFjdGlvbnMucGFzc2VzKS50b0NvbnRhaW4oJ3VzZXIxJylcclxuICAgIH0pXHJcblxyXG4gICAgaXQoJ2RvZXMgbm90IGFkZCBkdXBsaWNhdGUgcGFzc2VzJywgKCkgPT4ge1xyXG4gICAgICBhZGRQYXNzKCd1c2VyMScpXHJcbiAgICAgIGFkZFBhc3MoJ3VzZXIxJylcclxuICAgICAgY29uc3QgYWN0aW9ucyA9IGdldFVzZXJBY3Rpb25zKClcclxuICAgICAgZXhwZWN0KGFjdGlvbnMucGFzc2VzLmZpbHRlcihpZCA9PiBpZCA9PT0gJ3VzZXIxJykubGVuZ3RoKS50b0JlKDEpXHJcbiAgICB9KVxyXG4gIH0pXHJcblxyXG4gIGRlc2NyaWJlKCdpc0xpa2VkJywgKCkgPT4ge1xyXG4gICAgaXQoJ3JldHVybnMgdHJ1ZSBmb3IgbGlrZWQgdXNlcicsICgpID0+IHtcclxuICAgICAgYWRkTGlrZSgndXNlcjEnKVxyXG4gICAgICBleHBlY3QoaXNMaWtlZCgndXNlcjEnKSkudG9CZSh0cnVlKVxyXG4gICAgfSlcclxuXHJcbiAgICBpdCgncmV0dXJucyBmYWxzZSBmb3Igbm90IGxpa2VkIHVzZXInLCAoKSA9PiB7XHJcbiAgICAgIGV4cGVjdChpc0xpa2VkKCd1c2VyMScpKS50b0JlKGZhbHNlKVxyXG4gICAgfSlcclxuICB9KVxyXG5cclxuICBkZXNjcmliZSgnaXNQYXNzZWQnLCAoKSA9PiB7XHJcbiAgICBpdCgncmV0dXJucyB0cnVlIGZvciBwYXNzZWQgdXNlcicsICgpID0+IHtcclxuICAgICAgYWRkUGFzcygndXNlcjEnKVxyXG4gICAgICBleHBlY3QoaXNQYXNzZWQoJ3VzZXIxJykpLnRvQmUodHJ1ZSlcclxuICAgIH0pXHJcblxyXG4gICAgaXQoJ3JldHVybnMgZmFsc2UgZm9yIG5vdCBwYXNzZWQgdXNlcicsICgpID0+IHtcclxuICAgICAgZXhwZWN0KGlzUGFzc2VkKCd1c2VyMScpKS50b0JlKGZhbHNlKVxyXG4gICAgfSlcclxuICB9KVxyXG5cclxuICBkZXNjcmliZSgnZ2V0TGlrZXMnLCAoKSA9PiB7XHJcbiAgICBpdCgncmV0dXJucyBhbGwgbGlrZWQgdXNlciBJRHMnLCAoKSA9PiB7XHJcbiAgICAgIGFkZExpa2UoJ3VzZXIxJylcclxuICAgICAgYWRkTGlrZSgndXNlcjInKVxyXG4gICAgICBcclxuICAgICAgY29uc3QgbGlrZXMgPSBnZXRMaWtlcygpXHJcbiAgICAgIGV4cGVjdChsaWtlcykudG9Db250YWluKCd1c2VyMScpXHJcbiAgICAgIGV4cGVjdChsaWtlcykudG9Db250YWluKCd1c2VyMicpXHJcbiAgICB9KVxyXG5cclxuICAgIGl0KCdyZXR1cm5zIGVtcHR5IGFycmF5IHdoZW4gbm8gbGlrZXMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGxpa2VzID0gZ2V0TGlrZXMoKVxyXG4gICAgICBleHBlY3QobGlrZXMpLnRvRXF1YWwoW10pXHJcbiAgICB9KVxyXG4gIH0pXHJcbn0pXHJcblxyXG4iXSwibmFtZXMiOlsibG9jYWxTdG9yYWdlTW9jayIsInN0b3JlIiwiZ2V0SXRlbSIsImplc3QiLCJmbiIsImtleSIsInNldEl0ZW0iLCJ2YWx1ZSIsInRvU3RyaW5nIiwicmVtb3ZlSXRlbSIsImNsZWFyIiwiYmVmb3JlRWFjaCIsIndpbmRvdyIsImdsb2JhbCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5Iiwid3JpdGFibGUiLCJjb25maWd1cmFibGUiLCJkZXNjcmliZSIsIml0IiwiYWN0aW9ucyIsImdldFVzZXJBY3Rpb25zIiwiZXhwZWN0IiwidG9FcXVhbCIsImxpa2VzIiwicGFzc2VzIiwic3RvcmVkQWN0aW9ucyIsIkpTT04iLCJzdHJpbmdpZnkiLCJzZXRVc2VyQWN0aW9ucyIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwiYWRkTGlrZSIsInRvQ29udGFpbiIsImZpbHRlciIsImlkIiwibGVuZ3RoIiwidG9CZSIsImFkZFBhc3MiLCJpc0xpa2VkIiwiaXNQYXNzZWQiLCJnZXRMaWtlcyJdLCJtYXBwaW5ncyI6Ijs7Ozs4QkFRTztBQUVQLG9CQUFvQjtBQUNwQixNQUFNQSxtQkFBbUIsQUFBQyxDQUFBO0lBQ3hCLElBQUlDLFFBQVEsQ0FBQztJQUNiLE9BQU87UUFDTEMsU0FBU0MsS0FBS0MsRUFBRSxDQUFDLENBQUNDLE1BQVFKLEtBQUssQ0FBQ0ksSUFBSSxJQUFJO1FBQ3hDQyxTQUFTSCxLQUFLQyxFQUFFLENBQUMsQ0FBQ0MsS0FBS0U7WUFDckJOLEtBQUssQ0FBQ0ksSUFBSSxHQUFHRSxNQUFNQyxRQUFRO1FBQzdCO1FB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