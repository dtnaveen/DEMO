{"version":3,"sources":["D:\\Tech Vitta\\Apps\\DEMO\\__tests__\\lib\\subscription.test.js"],"sourcesContent":["import {\n  getUserSubscriptionTier,\n  isPremiumUser,\n  getDailyLikesRemaining,\n  recordLike,\n  hasPremiumFeature,\n  SUBSCRIPTION_TIERS,\n  FREE_USER_LIMITS\n} from '@/lib/subscription'\n\ndescribe('Subscription Functions', () => {\n  const createUser = (overrides = {}) => ({\n    id: '1',\n    name: 'Test User',\n    email: 'test@example.com',\n    subscriptionTier: 'free',\n    ...overrides\n  })\n\n  describe('getUserSubscriptionTier', () => {\n    it('returns FREE for null user', () => {\n      expect(getUserSubscriptionTier(null)).toBe(SUBSCRIPTION_TIERS.FREE)\n    })\n\n    it('returns FREE for user without subscriptionTier', () => {\n      const user = createUser({ subscriptionTier: undefined })\n      expect(getUserSubscriptionTier(user)).toBe(SUBSCRIPTION_TIERS.FREE)\n    })\n\n    it('returns correct tier for premium user', () => {\n      const user = createUser({ subscriptionTier: 'plus' })\n      expect(getUserSubscriptionTier(user)).toBe('plus')\n    })\n  })\n\n  describe('isPremiumUser', () => {\n    it('returns false for free user', () => {\n      const user = createUser({ subscriptionTier: 'free' })\n      expect(isPremiumUser(user)).toBe(false)\n    })\n\n    it('returns true for basic user', () => {\n      const user = createUser({ subscriptionTier: 'basic' })\n      expect(isPremiumUser(user)).toBe(true)\n    })\n\n    it('returns true for plus user', () => {\n      const user = createUser({ subscriptionTier: 'plus' })\n      expect(isPremiumUser(user)).toBe(true)\n    })\n\n    it('returns true for vip user', () => {\n      const user = createUser({ subscriptionTier: 'vip' })\n      expect(isPremiumUser(user)).toBe(true)\n    })\n\n    it('returns false for null user', () => {\n      expect(isPremiumUser(null)).toBe(false)\n    })\n  })\n\n  describe('getDailyLikesRemaining', () => {\n    it('returns unlimited for premium users', () => {\n      const user = createUser({ subscriptionTier: 'plus' })\n      const remaining = getDailyLikesRemaining(user)\n      expect(remaining).toBe('unlimited')\n    })\n\n    it('returns limit for free users', () => {\n      const user = createUser({ subscriptionTier: 'free' })\n      const remaining = getDailyLikesRemaining(user)\n      expect(remaining).toBe(FREE_USER_LIMITS.DAILY_LIKES)\n    })\n\n    it('tracks daily likes for free users', () => {\n      const user = createUser({ subscriptionTier: 'free' })\n      \n      // Record some likes\n      recordLike(user)\n      recordLike(user)\n      \n      const remaining = getDailyLikesRemaining(user)\n      expect(remaining).toBe(FREE_USER_LIMITS.DAILY_LIKES - 2)\n    })\n\n    it('resets daily likes after 24 hours', () => {\n      const user = createUser({ \n        subscriptionTier: 'free',\n        lastLikeReset: new Date(Date.now() - 25 * 60 * 60 * 1000).toISOString()\n      })\n      \n      const remaining = getDailyLikesRemaining(user)\n      expect(remaining).toBe(FREE_USER_LIMITS.DAILY_LIKES)\n    })\n  })\n\n  describe('recordLike', () => {\n    it('returns true for premium users', () => {\n      const user = createUser({ subscriptionTier: 'plus' })\n      expect(recordLike(user)).toBe(true)\n    })\n\n    it('returns true when likes remaining', () => {\n      const user = createUser({ subscriptionTier: 'free' })\n      expect(recordLike(user)).toBe(true)\n    })\n\n    it('returns false when daily limit reached', () => {\n      const user = createUser({ subscriptionTier: 'free' })\n      \n      // Exhaust daily likes\n      for (let i = 0; i < FREE_USER_LIMITS.DAILY_LIKES; i++) {\n        recordLike(user)\n      }\n      \n      expect(recordLike(user)).toBe(false)\n    })\n  })\n\n  describe('hasPremiumFeature', () => {\n    it('returns false for free users', () => {\n      const user = createUser({ subscriptionTier: 'free' })\n      expect(hasPremiumFeature(user, 'ADVANCED_FILTERS')).toBe(false)\n    })\n\n    it('returns true for premium users', () => {\n      const user = createUser({ subscriptionTier: 'plus' })\n      expect(hasPremiumFeature(user, 'ADVANCED_FILTERS')).toBe(true)\n    })\n\n    it('returns false for invalid feature', () => {\n      const user = createUser({ subscriptionTier: 'plus' })\n      expect(hasPremiumFeature(user, 'INVALID_FEATURE')).toBe(false)\n    })\n  })\n})\n"],"names":["describe","createUser","overrides","id","name","email","subscriptionTier","it","expect","getUserSubscriptionTier","toBe","SUBSCRIPTION_TIERS","FREE","user","undefined","isPremiumUser","remaining","getDailyLikesRemaining","FREE_USER_LIMITS","DAILY_LIKES","recordLike","lastLikeReset","Date","now","toISOString","i","hasPremiumFeature"],"mappings":"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"}