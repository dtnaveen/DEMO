{"version":3,"sources":["D:\\Tech Vitta\\Apps\\DEMO\\lib\\subscription.js"],"sourcesContent":["/**\r\n * Subscription and Premium Features Management\r\n */\r\n\r\n// Subscription tiers\r\nexport const SUBSCRIPTION_TIERS = {\r\n  FREE: 'free',\r\n  BASIC: 'basic',\r\n  PLUS: 'plus',\r\n  VIP: 'vip'\r\n};\r\n\r\n// Daily limits for free users\r\nexport const FREE_USER_LIMITS = {\r\n  DAILY_LIKES: 10,\r\n  DAILY_PASSES: 50,\r\n  REWINDS: 0,\r\n  ADVANCED_FILTERS: false,\r\n  READ_RECEIPTS: false,\r\n  SEE_WHO_LIKED: false,\r\n  PROFILE_BOOST: false,\r\n  PRIORITY_MATCHING: false,\r\n  AD_FREE: false\r\n};\r\n\r\n// Premium user benefits\r\nexport const PREMIUM_FEATURES = {\r\n  UNLIMITED_LIKES: true,\r\n  UNLIMITED_PASSES: true,\r\n  UNLIMITED_REWINDS: true,\r\n  ADVANCED_FILTERS: true,\r\n  READ_RECEIPTS: true,\r\n  SEE_WHO_LIKED: true,\r\n  PROFILE_BOOST: true,\r\n  PRIORITY_MATCHING: true,\r\n  AD_FREE: true,\r\n  MATCH_BREAKDOWN: true\r\n};\r\n\r\n/**\r\n * Get user's subscription tier\r\n */\r\nexport function getUserSubscriptionTier(user) {\r\n  if (!user) return SUBSCRIPTION_TIERS.FREE;\r\n  return user.subscriptionTier || SUBSCRIPTION_TIERS.FREE;\r\n}\r\n\r\n/**\r\n * Check if user is premium (any paid tier)\r\n */\r\nexport function isPremiumUser(user) {\r\n  const tier = getUserSubscriptionTier(user);\r\n  return tier !== SUBSCRIPTION_TIERS.FREE;\r\n}\r\n\r\n/**\r\n * Check if user has specific tier\r\n */\r\nexport function hasTier(user, tier) {\r\n  return getUserSubscriptionTier(user) === tier;\r\n}\r\n\r\n/**\r\n * Check if user has a specific premium feature\r\n */\r\nexport function hasPremiumFeature(user, feature) {\r\n  if (!user) return false;\r\n  const tier = getUserSubscriptionTier(user);\r\n  \r\n  // Free tier\r\n  if (tier === SUBSCRIPTION_TIERS.FREE) {\r\n    return FREE_USER_LIMITS[feature] || false;\r\n  }\r\n  \r\n  // Basic tier features\r\n  if (tier === SUBSCRIPTION_TIERS.BASIC) {\r\n    const basicFeatures = {\r\n      UNLIMITED_LIKES: true,\r\n      ADVANCED_FILTERS: true,\r\n      AD_FREE: true\r\n    };\r\n    return basicFeatures[feature] || false;\r\n  }\r\n  \r\n  // Plus tier features (includes Basic)\r\n  if (tier === SUBSCRIPTION_TIERS.PLUS) {\r\n    const plusFeatures = {\r\n      UNLIMITED_LIKES: true,\r\n      ADVANCED_FILTERS: true,\r\n      AD_FREE: true,\r\n      READ_RECEIPTS: true,\r\n      SEE_WHO_LIKED: true,\r\n      UNLIMITED_REWINDS: true,\r\n      PROFILE_BOOST: true\r\n    };\r\n    return plusFeatures[feature] || false;\r\n  }\r\n  \r\n  // VIP tier (all features)\r\n  if (tier === SUBSCRIPTION_TIERS.VIP) {\r\n    return PREMIUM_FEATURES[feature] || false;\r\n  }\r\n  \r\n  return false;\r\n}\r\n\r\n/**\r\n * Get subscription tier pricing\r\n */\r\nexport function getTierPricing() {\r\n  return {\r\n    [SUBSCRIPTION_TIERS.BASIC]: {\r\n      name: 'Basic',\r\n      price: 9.99,\r\n      period: 'month',\r\n      features: ['Unlimited Likes', 'Advanced Filters', 'Ad-Free']\r\n    },\r\n    [SUBSCRIPTION_TIERS.PLUS]: {\r\n      name: 'Plus',\r\n      price: 19.99,\r\n      period: 'month',\r\n      features: ['Everything in Basic', 'Read Receipts', 'See Who Liked You', 'Unlimited Rewinds', 'Profile Boost']\r\n    },\r\n    [SUBSCRIPTION_TIERS.VIP]: {\r\n      name: 'VIP',\r\n      price: 49.99,\r\n      period: 'month',\r\n      features: ['Everything in Plus', 'Priority Matching', 'Match Breakdown', 'Exclusive Features']\r\n    }\r\n  };\r\n}\r\n\r\n/**\r\n * Get daily likes remaining for free users\r\n */\r\nexport function getDailyLikesRemaining(user) {\r\n  if (isPremiumUser(user)) {\r\n    return 'unlimited';\r\n  }\r\n  \r\n  if (typeof window === 'undefined') return FREE_USER_LIMITS.DAILY_LIKES;\r\n  \r\n  try {\r\n    const now = Date.now();\r\n    const likesData = JSON.parse(localStorage.getItem('dailyLikes') || '{}');\r\n    \r\n    // Check if 24 hours have passed since last reset\r\n    if (user.lastLikeReset) {\r\n      const lastReset = new Date(user.lastLikeReset).getTime();\r\n      const hoursSinceReset = (now - lastReset) / (1000 * 60 * 60);\r\n      if (hoursSinceReset >= 24) {\r\n        return FREE_USER_LIMITS.DAILY_LIKES;\r\n      }\r\n    }\r\n    \r\n    // Fallback to date-based check\r\n    const today = new Date().toDateString();\r\n    if (likesData.date !== today) {\r\n      return FREE_USER_LIMITS.DAILY_LIKES;\r\n    }\r\n    \r\n    return Math.max(0, FREE_USER_LIMITS.DAILY_LIKES - (likesData.count || 0));\r\n  } catch (error) {\r\n    return FREE_USER_LIMITS.DAILY_LIKES;\r\n  }\r\n}\r\n\r\n/**\r\n * Record a like for daily limit tracking\r\n */\r\nexport function recordLike(user) {\r\n  if (isPremiumUser(user)) return true;\r\n  \r\n  if (typeof window === 'undefined') return false;\r\n  \r\n  try {\r\n    const today = new Date().toDateString();\r\n    const likesData = JSON.parse(localStorage.getItem('dailyLikes') || '{}');\r\n    \r\n    if (likesData.date !== today) {\r\n      likesData.date = today;\r\n      likesData.count = 0;\r\n    }\r\n    \r\n    const remaining = FREE_USER_LIMITS.DAILY_LIKES - likesData.count;\r\n    if (remaining <= 0) {\r\n      return false;\r\n    }\r\n    \r\n    likesData.count = (likesData.count || 0) + 1;\r\n    localStorage.setItem('dailyLikes', JSON.stringify(likesData));\r\n    return true;\r\n  } catch (error) {\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * Get rewinds remaining for free users\r\n */\r\nexport function getRewindsRemaining(user) {\r\n  if (isPremiumUser(user)) {\r\n    return 'unlimited';\r\n  }\r\n  return FREE_USER_LIMITS.REWINDS;\r\n}\r\n\r\n/**\r\n * Upgrade user to premium\r\n */\r\nexport function upgradeToPremium(user) {\r\n  if (!user) return null;\r\n  \r\n  const updatedUser = {\r\n    ...user,\r\n    subscriptionTier: SUBSCRIPTION_TIERS.PREMIUM,\r\n    premiumSince: new Date().toISOString()\r\n  };\r\n  \r\n  return updatedUser;\r\n}\r\n\r\n/**\r\n * Get premium features list for display\r\n */\r\nexport function getPremiumFeaturesList() {\r\n  return [\r\n    { name: 'Unlimited Likes', icon: 'â¤ï¸', description: 'Like as many profiles as you want' },\r\n    { name: 'See Who Liked You', icon: 'ðŸ‘€', description: 'View everyone who liked your profile' },\r\n    { name: 'Advanced Filters', icon: 'ðŸ”', description: 'Access to premium filtering options' },\r\n    { name: 'Read Receipts', icon: 'âœ“', description: 'See when your messages are read' },\r\n    { name: 'Unlimited Rewinds', icon: 'â†©ï¸', description: 'Undo any pass you made' },\r\n    { name: 'Profile Boost', icon: 'ðŸš€', description: 'Get shown to more people first' },\r\n    { name: 'Priority Matching', icon: 'â­', description: 'Higher priority in match algorithm' },\r\n    { name: 'Ad-Free Experience', icon: 'âœ¨', description: 'Enjoy without interruptions' },\r\n    { name: 'Match Breakdown', icon: 'ðŸ“Š', description: 'See detailed compatibility analysis' }\r\n  ];\r\n}\r\n\r\n"],"names":["FREE_USER_LIMITS","PREMIUM_FEATURES","SUBSCRIPTION_TIERS","getDailyLikesRemaining","getPremiumFeaturesList","getRewindsRemaining","getTierPricing","getUserSubscriptionTier","hasPremiumFeature","hasTier","isPremiumUser","recordLike","upgradeToPremium","FREE","BASIC","PLUS","VIP","DAILY_LIKES","DAILY_PASSES","REWINDS","ADVANCED_FILTERS","READ_RECEIPTS","SEE_WHO_LIKED","PROFILE_BOOST","PRIORITY_MATCHING","AD_FREE","UNLIMITED_LIKES","UNLIMITED_PASSES","UNLIMITED_REWINDS","MATCH_BREAKDOWN","user","subscriptionTier","tier","feature","basicFeatures","plusFeatures","name","price","period","features","window","now","Date","likesData","JSON","parse","localStorage","getItem","lastLikeReset","lastReset","getTime","hoursSinceReset","today","toDateString","date","Math","max","count","error","remaining","setItem","stringify","updatedUser","PREMIUM","premiumSince","toISOString","icon","description"],"mappings":"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"}