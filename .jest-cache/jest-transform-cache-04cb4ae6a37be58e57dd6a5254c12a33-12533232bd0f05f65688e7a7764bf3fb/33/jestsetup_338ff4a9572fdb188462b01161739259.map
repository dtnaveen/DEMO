{"version":3,"sources":["D:\\Tech Vitta\\Apps\\DEMO\\jest.setup.js"],"sourcesContent":["// Learn more: https://github.com/testing-library/jest-dom\r\nimport '@testing-library/jest-dom'\r\n\r\n// Mock Next.js router\r\njest.mock('next/navigation', () => ({\r\n  useRouter() {\r\n    return {\r\n      push: jest.fn(),\r\n      replace: jest.fn(),\r\n      prefetch: jest.fn(),\r\n      back: jest.fn(),\r\n      pathname: '/',\r\n      query: {},\r\n      asPath: '/',\r\n    }\r\n  },\r\n  useSearchParams() {\r\n    return new URLSearchParams()\r\n  },\r\n  usePathname() {\r\n    return '/'\r\n  },\r\n}))\r\n\r\n// Ensure window exists\r\nif (typeof window === 'undefined') {\r\n  global.window = {};\r\n}\r\n\r\n// Mock localStorage with a working store\r\nlet localStorageStore = {};\r\nconst localStorageMock = {\r\n  getItem: jest.fn((key) => {\r\n    return localStorageStore[key] || null;\r\n  }),\r\n  setItem: jest.fn((key, value) => {\r\n    localStorageStore[key] = value.toString();\r\n  }),\r\n  removeItem: jest.fn((key) => {\r\n    delete localStorageStore[key];\r\n  }),\r\n  clear: jest.fn(() => {\r\n    localStorageStore = {};\r\n  }),\r\n};\r\n\r\n// Set up localStorage on window and global\r\nObject.defineProperty(window, 'localStorage', {\r\n  value: localStorageMock,\r\n  writable: true,\r\n  configurable: true,\r\n});\r\nglobal.localStorage = localStorageMock;\r\n\r\n// Mock window.matchMedia\r\nObject.defineProperty(window, 'matchMedia', {\r\n  writable: true,\r\n  value: jest.fn().mockImplementation(query => ({\r\n    matches: false,\r\n    media: query,\r\n    onchange: null,\r\n    addListener: jest.fn(),\r\n    removeListener: jest.fn(),\r\n    addEventListener: jest.fn(),\r\n    removeEventListener: jest.fn(),\r\n    dispatchEvent: jest.fn(),\r\n  })),\r\n})\r\n\r\n// Polyfill TextEncoder/TextDecoder for Node.js environment\r\nif (typeof TextEncoder === 'undefined') {\r\n  const { TextEncoder, TextDecoder } = require('util');\r\n  global.TextEncoder = TextEncoder;\r\n  global.TextDecoder = TextDecoder;\r\n}\r\n\r\n// Mock crypto.subtle for password security tests\r\n// Store hashes by salt to ensure consistent verification\r\nconst cryptoHashStore = new Map();\r\n\r\n// Always set up crypto mock for tests\r\nglobal.crypto = {\r\n  getRandomValues: (arr) => {\r\n    // Return predictable values for testing (based on array length for consistency)\r\n    for (let i = 0; i < arr.length; i++) {\r\n      arr[i] = (i * 17) % 256; // Use prime number for better distribution\r\n    }\r\n    return arr;\r\n  },\r\n  subtle: {\r\n    importKey: jest.fn().mockImplementation(async () => {\r\n      return { format: 'raw', algorithm: { name: 'PBKDF2' }, extractable: false, keyUsages: ['deriveBits'] };\r\n    }),\r\n    deriveBits: jest.fn().mockImplementation(async (algorithm, keyMaterial, length) => {\r\n      // Create a consistent hash based on salt\r\n      const saltHex = Array.from(algorithm.salt).map(b => b.toString(16).padStart(2, '0')).join('');\r\n      const key = `${saltHex}-${length}`;\r\n      \r\n      if (!cryptoHashStore.has(key)) {\r\n        // Generate a predictable hash based on salt\r\n        const hash = new Uint8Array(length / 8);\r\n        for (let i = 0; i < hash.length; i++) {\r\n          hash[i] = (i * 7 + saltHex.charCodeAt(i % saltHex.length)) % 256;\r\n        }\r\n        cryptoHashStore.set(key, hash.buffer);\r\n      }\r\n      \r\n      return cryptoHashStore.get(key);\r\n    })\r\n  }\r\n};\r\n\r\n"],"names":["jest","mock","useRouter","push","fn","replace","prefetch","back","pathname","query","asPath","useSearchParams","URLSearchParams","usePathname","window","global","localStorageStore","localStorageMock","getItem","key","setItem","value","toString","removeItem","clear","Object","defineProperty","writable","configurable","localStorage","mockImplementation","matches","media","onchange","addListener","removeListener","addEventListener","removeEventListener","dispatchEvent","TextEncoder","TextDecoder","require","cryptoHashStore","Map","crypto","getRandomValues","arr","i","length","subtle","importKey","format","algorithm","name","extractable","keyUsages","deriveBits","keyMaterial","saltHex","Array","from","salt","map","b","padStart","join","has","hash","Uint8Array","charCodeAt","set","buffer","get"],"mappings":"AAAA,0DAA0D;;AAG1D,sBAAsB;AACtBA,KAAKC,IAAI,CAAC,mBAAmB,IAAO,CAAA;QAClCC;YACE,OAAO;gBACLC,MAAMH,KAAKI,EAAE;gBACbC,SAASL,KAAKI,EAAE;gBAChBE,UAAUN,KAAKI,EAAE;gBACjBG,MAAMP,KAAKI,EAAE;gBACbI,UAAU;gBACVC,OAAO,CAAC;gBACRC,QAAQ;YACV;QACF;QACAC;YACE,OAAO,IAAIC;QACb;QACAC;YACE,OAAO;QACT;IACF,CAAA;;;;QArBO;AAuBP,uBAAuB;AACvB,IAAI,OAAOC,WAAW,aAAa;IACjCC,OAAOD,MAAM,GAAG,CAAC;AACnB;AAEA,yCAAyC;AACzC,IAAIE,oBAAoB,CAAC;AACzB,MAAMC,mBAAmB;IACvBC,SAASlB,KAAKI,EAAE,CAAC,CAACe;QAChB,OAAOH,iBAAiB,CAACG,IAAI,IAAI;IACnC;IACAC,SAASpB,KAAKI,EAAE,CAAC,CAACe,KAAKE;QACrBL,iBAAiB,CAACG,IAAI,GAAGE,MAAMC,QAAQ;IACzC;IACAC,YAAYvB,KAAKI,EAAE,CAAC,CAACe;QACnB,OAAOH,iBAAiB,CAACG,IAAI;IAC/B;IACAK,OAAOxB,KAAKI,EAAE,CAAC;QACbY,oBAAoB,CAAC;IACvB;AACF;AAEA,2CAA2C;AAC3CS,OAAOC,cAAc,CAACZ,QAAQ,gBAAgB;IAC5CO,OAAOJ;IACPU,UAAU;IACVC,cAAc;AAChB;AACAb,OAAOc,YAAY,GAAGZ;AAEtB,yBAAyB;AACzBQ,OAAOC,cAAc,CAACZ,QAAQ,cAAc;IAC1Ca,UAAU;IACVN,OAAOrB,KAAKI,EAAE,GAAG0B,kBAAkB,CAACrB,CAAAA,QAAU,CAAA;YAC5CsB,SAAS;YACTC,OAAOvB;YACPwB,UAAU;YACVC,aAAalC,KAAKI,EAAE;YACpB+B,gBAAgBnC,KAAKI,EAAE;YACvBgC,kBAAkBpC,KAAKI,EAAE;YACzBiC,qBAAqBrC,KAAKI,EAAE;YAC5BkC,eAAetC,KAAKI,EAAE;QACxB,CAAA;AACF;AAEA,2DAA2D;AAC3D,IAAI,OAAOmC,gBAAgB,aAAa;IACtC,MAAM,EAAEA,aAAAA,YAAW,EAAEC,WAAW,EAAE,GAAGC,QAAQ;IAC7C1B,OAAOwB,WAAW,GAAGA;IACrBxB,OAAOyB,WAAW,GAAGA;AACvB;AAEA,iDAAiD;AACjD,yDAAyD;AACzD,MAAME,kBAAkB,IAAIC;AAE5B,sCAAsC;AACtC5B,OAAO6B,MAAM,GAAG;IACdC,iBAAiB,CAACC;QAChB,gFAAgF;QAChF,IAAK,IAAIC,IAAI,GAAGA,IAAID,IAAIE,MAAM,EAAED,IAAK;YACnCD,GAAG,CAACC,EAAE,GAAG,AAACA,IAAI,KAAM,KAAK,2CAA2C;QACtE;QACA,OAAOD;IACT;IACAG,QAAQ;QACNC,WAAWlD,KAAKI,EAAE,GAAG0B,kBAAkB,CAAC;YACtC,OAAO;gBAAEqB,QAAQ;gBAAOC,WAAW;oBAAEC,MAAM;gBAAS;gBAAGC,aAAa;gBAAOC,WAAW;oBAAC;iBAAa;YAAC;QACvG;QACAC,YAAYxD,KAAKI,EAAE,GAAG0B,kBAAkB,CAAC,OAAOsB,WAAWK,aAAaT;YACtE,yCAAyC;YACzC,MAAMU,UAAUC,MAAMC,IAAI,CAACR,UAAUS,IAAI,EAAEC,GAAG,CAACC,CAAAA,IAAKA,EAAEzC,QAAQ,CAAC,IAAI0C,QAAQ,CAAC,GAAG,MAAMC,IAAI,CAAC;YAC1F,MAAM9C,MAAM,GAAGuC,QAAQ,CAAC,EAAEV,QAAQ;YAElC,IAAI,CAACN,gBAAgBwB,GAAG,CAAC/C,MAAM;gBAC7B,4CAA4C;gBAC5C,MAAMgD,OAAO,IAAIC,WAAWpB,SAAS;gBACrC,IAAK,IAAID,IAAI,GAAGA,IAAIoB,KAAKnB,MAAM,EAAED,IAAK;oBACpCoB,IAAI,CAACpB,EAAE,GAAG,AAACA,CAAAA,IAAI,IAAIW,QAAQW,UAAU,CAACtB,IAAIW,QAAQV,MAAM,CAAA,IAAK;gBAC/D;gBACAN,gBAAgB4B,GAAG,CAACnD,KAAKgD,KAAKI,MAAM;YACtC;YAEA,OAAO7B,gBAAgB8B,GAAG,CAACrD;QAC7B;IACF;AACF"}