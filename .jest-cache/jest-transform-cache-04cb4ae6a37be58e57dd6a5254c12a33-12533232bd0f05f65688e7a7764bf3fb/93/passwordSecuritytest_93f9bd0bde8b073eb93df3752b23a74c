77a18350b140534d106ba17a3127216d
/**
 * Password Security Tests
 * Tests for password hashing, verification, and rate limiting
 */ "use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
const _passwordSecurity = require("../../lib/passwordSecurity.js");
// Crypto is mocked in jest.setup.js
describe('Password Security', ()=>{
    describe('hashPassword', ()=>{
        it('should hash a password successfully', async ()=>{
            const password = 'TestPassword123';
            const hash = await (0, _passwordSecurity.hashPassword)(password);
            expect(hash).toBeDefined();
            expect(typeof hash).toBe('string');
            expect(hash.includes(':')).toBe(true);
        });
        it('should throw error for empty password', async ()=>{
            await expect((0, _passwordSecurity.hashPassword)('')).rejects.toThrow();
        });
        it('should throw error for non-string password', async ()=>{
            await expect((0, _passwordSecurity.hashPassword)(null)).rejects.toThrow();
            await expect((0, _passwordSecurity.hashPassword)(123)).rejects.toThrow();
        });
    });
    describe('verifyPassword', ()=>{
        it('should verify correct password', async ()=>{
            const password = 'TestPassword123';
            const hash = await (0, _passwordSecurity.hashPassword)(password);
            const isValid = await (0, _passwordSecurity.verifyPassword)(password, hash);
            expect(isValid).toBe(true);
        });
        it('should reject incorrect password', async ()=>{
            const password = 'TestPassword123';
            const hash = await (0, _passwordSecurity.hashPassword)(password);
            const isValid = await (0, _passwordSecurity.verifyPassword)('WrongPassword', hash);
            expect(isValid).toBe(false);
        });
        it('should handle plain text passwords (backward compatibility)', async ()=>{
            const password = 'plaintext123';
            const isValid = await (0, _passwordSecurity.verifyPassword)(password, password);
            expect(isValid).toBe(true);
        });
        it('should return false for empty inputs', async ()=>{
            expect(await (0, _passwordSecurity.verifyPassword)('', 'hash')).toBe(false);
            expect(await (0, _passwordSecurity.verifyPassword)('password', '')).toBe(false);
            expect(await (0, _passwordSecurity.verifyPassword)('', '')).toBe(false);
        });
    });
    describe('validatePasswordStrength', ()=>{
        it('should accept strong passwords', ()=>{
            const result = (0, _passwordSecurity.validatePasswordStrength)('StrongPass123');
            expect(result.isValid).toBe(true);
        });
        it('should reject passwords shorter than 8 characters', ()=>{
            const result = (0, _passwordSecurity.validatePasswordStrength)('Short1');
            expect(result.isValid).toBe(false);
            expect(result.message).toContain('8 characters');
        });
        it('should reject passwords without numbers', ()=>{
            const result = (0, _passwordSecurity.validatePasswordStrength)('NoNumbers');
            expect(result.isValid).toBe(false);
            expect(result.message).toContain('number');
        });
        it('should reject passwords without letters', ()=>{
            const result = (0, _passwordSecurity.validatePasswordStrength)('12345678');
            expect(result.isValid).toBe(false);
            expect(result.message).toContain('letter');
        });
        it('should reject passwords longer than 128 characters', ()=>{
            const longPassword = 'a'.repeat(129) + '1';
            const result = (0, _passwordSecurity.validatePasswordStrength)(longPassword);
            expect(result.isValid).toBe(false);
            expect(result.message).toContain('128 characters');
        });
        it('should reject empty passwords', ()=>{
            const result = (0, _passwordSecurity.validatePasswordStrength)('');
            expect(result.isValid).toBe(false);
            expect(result.message).toContain('required');
        });
    });
    describe('isSecureHash', ()=>{
        it('should identify secure hash format', ()=>{
            expect((0, _passwordSecurity.isSecureHash)('salt:hash')).toBe(true);
            expect((0, _passwordSecurity.isSecureHash)('abc123:def456')).toBe(true);
        });
        it('should reject plain text as secure hash', ()=>{
            expect((0, _passwordSecurity.isSecureHash)('plaintext')).toBe(false);
            expect((0, _passwordSecurity.isSecureHash)('password123')).toBe(false);
        });
        it('should handle invalid formats', ()=>{
            expect((0, _passwordSecurity.isSecureHash)('')).toBe(false);
            expect((0, _passwordSecurity.isSecureHash)(null)).toBe(false);
            expect((0, _passwordSecurity.isSecureHash)('onlysalt:')).toBe(false);
            expect((0, _passwordSecurity.isSecureHash)(':onlyhash')).toBe(false);
        });
    });
    describe('LoginRateLimiter', ()=>{
        beforeEach(()=>{
            // Clear rate limiter state
            if (typeof window !== 'undefined') {
                localStorage.removeItem('login_attempts');
            }
            _passwordSecurity.loginRateLimiter.attempts.clear();
        });
        it('should allow login attempts initially', ()=>{
            const result = _passwordSecurity.loginRateLimiter.isRateLimited('test@example.com');
            expect(result.isLimited).toBe(false);
            expect(result.attemptsLeft).toBe(5);
        });
        it('should track failed attempts', ()=>{
            _passwordSecurity.loginRateLimiter.recordFailedAttempt('test@example.com');
            const result = _passwordSecurity.loginRateLimiter.isRateLimited('test@example.com');
            expect(result.attemptsLeft).toBe(4);
        });
        it('should lockout after max attempts', ()=>{
            for(let i = 0; i < 5; i++){
                _passwordSecurity.loginRateLimiter.recordFailedAttempt('test@example.com');
            }
            const result = _passwordSecurity.loginRateLimiter.isRateLimited('test@example.com');
            expect(result.isLimited).toBe(true);
            expect(result.attemptsLeft).toBe(0);
        });
        it('should clear attempts on successful login', ()=>{
            _passwordSecurity.loginRateLimiter.recordFailedAttempt('test@example.com');
            _passwordSecurity.loginRateLimiter.clearAttempts('test@example.com');
            const result = _passwordSecurity.loginRateLimiter.isRateLimited('test@example.com');
            expect(result.isLimited).toBe(false);
            expect(result.attemptsLeft).toBe(5);
        });
        it('should track attempts per identifier', ()=>{
            _passwordSecurity.loginRateLimiter.recordFailedAttempt('user1@example.com');
            _passwordSecurity.loginRateLimiter.recordFailedAttempt('user2@example.com');
            const result1 = _passwordSecurity.loginRateLimiter.isRateLimited('user1@example.com');
            const result2 = _passwordSecurity.loginRateLimiter.isRateLimited('user2@example.com');
            expect(result1.attemptsLeft).toBe(4);
            expect(result2.attemptsLeft).toBe(4);
        });
    });
});

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFxUZWNoIFZpdHRhXFxBcHBzXFxERU1PXFxfX3Rlc3RzX19cXGxpYlxccGFzc3dvcmRTZWN1cml0eS50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBQYXNzd29yZCBTZWN1cml0eSBUZXN0c1xyXG4gKiBUZXN0cyBmb3IgcGFzc3dvcmQgaGFzaGluZywgdmVyaWZpY2F0aW9uLCBhbmQgcmF0ZSBsaW1pdGluZ1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IFxyXG4gIGhhc2hQYXNzd29yZCwgXHJcbiAgdmVyaWZ5UGFzc3dvcmQsIFxyXG4gIHZhbGlkYXRlUGFzc3dvcmRTdHJlbmd0aCwgXHJcbiAgaXNTZWN1cmVIYXNoLFxyXG4gIGxvZ2luUmF0ZUxpbWl0ZXIgXHJcbn0gZnJvbSAnQC9saWIvcGFzc3dvcmRTZWN1cml0eSc7XHJcblxyXG4vLyBDcnlwdG8gaXMgbW9ja2VkIGluIGplc3Quc2V0dXAuanNcclxuXHJcbmRlc2NyaWJlKCdQYXNzd29yZCBTZWN1cml0eScsICgpID0+IHtcclxuICBkZXNjcmliZSgnaGFzaFBhc3N3b3JkJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBoYXNoIGEgcGFzc3dvcmQgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBjb25zdCBwYXNzd29yZCA9ICdUZXN0UGFzc3dvcmQxMjMnO1xyXG4gICAgICBjb25zdCBoYXNoID0gYXdhaXQgaGFzaFBhc3N3b3JkKHBhc3N3b3JkKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChoYXNoKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QodHlwZW9mIGhhc2gpLnRvQmUoJ3N0cmluZycpO1xyXG4gICAgICBleHBlY3QoaGFzaC5pbmNsdWRlcygnOicpKS50b0JlKHRydWUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBlcnJvciBmb3IgZW1wdHkgcGFzc3dvcmQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IGV4cGVjdChoYXNoUGFzc3dvcmQoJycpKS5yZWplY3RzLnRvVGhyb3coKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3IgZm9yIG5vbi1zdHJpbmcgcGFzc3dvcmQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGF3YWl0IGV4cGVjdChoYXNoUGFzc3dvcmQobnVsbCkpLnJlamVjdHMudG9UaHJvdygpO1xyXG4gICAgICBhd2FpdCBleHBlY3QoaGFzaFBhc3N3b3JkKDEyMykpLnJlamVjdHMudG9UaHJvdygpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCd2ZXJpZnlQYXNzd29yZCcsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgdmVyaWZ5IGNvcnJlY3QgcGFzc3dvcmQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHBhc3N3b3JkID0gJ1Rlc3RQYXNzd29yZDEyMyc7XHJcbiAgICAgIGNvbnN0IGhhc2ggPSBhd2FpdCBoYXNoUGFzc3dvcmQocGFzc3dvcmQpO1xyXG4gICAgICBjb25zdCBpc1ZhbGlkID0gYXdhaXQgdmVyaWZ5UGFzc3dvcmQocGFzc3dvcmQsIGhhc2gpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KGlzVmFsaWQpLnRvQmUodHJ1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJlamVjdCBpbmNvcnJlY3QgcGFzc3dvcmQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHBhc3N3b3JkID0gJ1Rlc3RQYXNzd29yZDEyMyc7XHJcbiAgICAgIGNvbnN0IGhhc2ggPSBhd2FpdCBoYXNoUGFzc3dvcmQocGFzc3dvcmQpO1xyXG4gICAgICBjb25zdCBpc1ZhbGlkID0gYXdhaXQgdmVyaWZ5UGFzc3dvcmQoJ1dyb25nUGFzc3dvcmQnLCBoYXNoKTtcclxuICAgICAgXHJcbiAgICAgIGV4cGVjdChpc1ZhbGlkKS50b0JlKGZhbHNlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHBsYWluIHRleHQgcGFzc3dvcmRzIChiYWNrd2FyZCBjb21wYXRpYmlsaXR5KScsIGFzeW5jICgpID0+IHtcclxuICAgICAgY29uc3QgcGFzc3dvcmQgPSAncGxhaW50ZXh0MTIzJztcclxuICAgICAgY29uc3QgaXNWYWxpZCA9IGF3YWl0IHZlcmlmeVBhc3N3b3JkKHBhc3N3b3JkLCBwYXNzd29yZCk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoaXNWYWxpZCkudG9CZSh0cnVlKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGZhbHNlIGZvciBlbXB0eSBpbnB1dHMnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGV4cGVjdChhd2FpdCB2ZXJpZnlQYXNzd29yZCgnJywgJ2hhc2gnKSkudG9CZShmYWxzZSk7XHJcbiAgICAgIGV4cGVjdChhd2FpdCB2ZXJpZnlQYXNzd29yZCgncGFzc3dvcmQnLCAnJykpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QoYXdhaXQgdmVyaWZ5UGFzc3dvcmQoJycsICcnKSkudG9CZShmYWxzZSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ3ZhbGlkYXRlUGFzc3dvcmRTdHJlbmd0aCcsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgYWNjZXB0IHN0cm9uZyBwYXNzd29yZHMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHZhbGlkYXRlUGFzc3dvcmRTdHJlbmd0aCgnU3Ryb25nUGFzczEyMycpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmlzVmFsaWQpLnRvQmUodHJ1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJlamVjdCBwYXNzd29yZHMgc2hvcnRlciB0aGFuIDggY2hhcmFjdGVycycsICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGVQYXNzd29yZFN0cmVuZ3RoKCdTaG9ydDEnKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5pc1ZhbGlkKS50b0JlKGZhbHNlKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5tZXNzYWdlKS50b0NvbnRhaW4oJzggY2hhcmFjdGVycycpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgcGFzc3dvcmRzIHdpdGhvdXQgbnVtYmVycycsICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGVQYXNzd29yZFN0cmVuZ3RoKCdOb051bWJlcnMnKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5pc1ZhbGlkKS50b0JlKGZhbHNlKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5tZXNzYWdlKS50b0NvbnRhaW4oJ251bWJlcicpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgcGFzc3dvcmRzIHdpdGhvdXQgbGV0dGVycycsICgpID0+IHtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGVQYXNzd29yZFN0cmVuZ3RoKCcxMjM0NTY3OCcpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmlzVmFsaWQpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QocmVzdWx0Lm1lc3NhZ2UpLnRvQ29udGFpbignbGV0dGVyJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJlamVjdCBwYXNzd29yZHMgbG9uZ2VyIHRoYW4gMTI4IGNoYXJhY3RlcnMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGxvbmdQYXNzd29yZCA9ICdhJy5yZXBlYXQoMTI5KSArICcxJztcclxuICAgICAgY29uc3QgcmVzdWx0ID0gdmFsaWRhdGVQYXNzd29yZFN0cmVuZ3RoKGxvbmdQYXNzd29yZCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuaXNWYWxpZCkudG9CZShmYWxzZSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQubWVzc2FnZSkudG9Db250YWluKCcxMjggY2hhcmFjdGVycycpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgZW1wdHkgcGFzc3dvcmRzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSB2YWxpZGF0ZVBhc3N3b3JkU3RyZW5ndGgoJycpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmlzVmFsaWQpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QocmVzdWx0Lm1lc3NhZ2UpLnRvQ29udGFpbigncmVxdWlyZWQnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnaXNTZWN1cmVIYXNoJywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBpZGVudGlmeSBzZWN1cmUgaGFzaCBmb3JtYXQnLCAoKSA9PiB7XHJcbiAgICAgIGV4cGVjdChpc1NlY3VyZUhhc2goJ3NhbHQ6aGFzaCcpKS50b0JlKHRydWUpO1xyXG4gICAgICBleHBlY3QoaXNTZWN1cmVIYXNoKCdhYmMxMjM6ZGVmNDU2JykpLnRvQmUodHJ1ZSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHJlamVjdCBwbGFpbiB0ZXh0IGFzIHNlY3VyZSBoYXNoJywgKCkgPT4ge1xyXG4gICAgICBleHBlY3QoaXNTZWN1cmVIYXNoKCdwbGFpbnRleHQnKSkudG9CZShmYWxzZSk7XHJcbiAgICAgIGV4cGVjdChpc1NlY3VyZUhhc2goJ3Bhc3N3b3JkMTIzJykpLnRvQmUoZmFsc2UpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgaW52YWxpZCBmb3JtYXRzJywgKCkgPT4ge1xyXG4gICAgICBleHBlY3QoaXNTZWN1cmVIYXNoKCcnKSkudG9CZShmYWxzZSk7XHJcbiAgICAgIGV4cGVjdChpc1NlY3VyZUhhc2gobnVsbCkpLnRvQmUoZmFsc2UpO1xyXG4gICAgICBleHBlY3QoaXNTZWN1cmVIYXNoKCdvbmx5c2FsdDonKSkudG9CZShmYWxzZSk7XHJcbiAgICAgIGV4cGVjdChpc1NlY3VyZUhhc2goJzpvbmx5aGFzaCcpKS50b0JlKGZhbHNlKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnTG9naW5SYXRlTGltaXRlcicsICgpID0+IHtcclxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgICAvLyBDbGVhciByYXRlIGxpbWl0ZXIgc3RhdGVcclxuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ2xvZ2luX2F0dGVtcHRzJyk7XHJcbiAgICAgIH1cclxuICAgICAgbG9naW5SYXRlTGltaXRlci5hdHRlbXB0cy5jbGVhcigpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBhbGxvdyBsb2dpbiBhdHRlbXB0cyBpbml0aWFsbHknLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGxvZ2luUmF0ZUxpbWl0ZXIuaXNSYXRlTGltaXRlZCgndGVzdEBleGFtcGxlLmNvbScpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmlzTGltaXRlZCkudG9CZShmYWxzZSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuYXR0ZW1wdHNMZWZ0KS50b0JlKDUpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB0cmFjayBmYWlsZWQgYXR0ZW1wdHMnLCAoKSA9PiB7XHJcbiAgICAgIGxvZ2luUmF0ZUxpbWl0ZXIucmVjb3JkRmFpbGVkQXR0ZW1wdCgndGVzdEBleGFtcGxlLmNvbScpO1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBsb2dpblJhdGVMaW1pdGVyLmlzUmF0ZUxpbWl0ZWQoJ3Rlc3RAZXhhbXBsZS5jb20nKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5hdHRlbXB0c0xlZnQpLnRvQmUoNCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGxvY2tvdXQgYWZ0ZXIgbWF4IGF0dGVtcHRzJywgKCkgPT4ge1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xyXG4gICAgICAgIGxvZ2luUmF0ZUxpbWl0ZXIucmVjb3JkRmFpbGVkQXR0ZW1wdCgndGVzdEBleGFtcGxlLmNvbScpO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGxvZ2luUmF0ZUxpbWl0ZXIuaXNSYXRlTGltaXRlZCgndGVzdEBleGFtcGxlLmNvbScpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmlzTGltaXRlZCkudG9CZSh0cnVlKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5hdHRlbXB0c0xlZnQpLnRvQmUoMCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGNsZWFyIGF0dGVtcHRzIG9uIHN1Y2Nlc3NmdWwgbG9naW4nLCAoKSA9PiB7XHJcbiAgICAgIGxvZ2luUmF0ZUxpbWl0ZXIucmVjb3JkRmFpbGVkQXR0ZW1wdCgndGVzdEBleGFtcGxlLmNvbScpO1xyXG4gICAgICBsb2dpblJhdGVMaW1pdGVyLmNsZWFyQXR0ZW1wdHMoJ3Rlc3RAZXhhbXBsZS5jb20nKTtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gbG9naW5SYXRlTGltaXRlci5pc1JhdGVMaW1pdGVkKCd0ZXN0QGV4YW1wbGUuY29tJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuaXNMaW1pdGVkKS50b0JlKGZhbHNlKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5hdHRlbXB0c0xlZnQpLnRvQmUoNSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHRyYWNrIGF0dGVtcHRzIHBlciBpZGVudGlmaWVyJywgKCkgPT4ge1xyXG4gICAgICBsb2dpblJhdGVMaW1pdGVyLnJlY29yZEZhaWxlZEF0dGVtcHQoJ3VzZXIxQGV4YW1wbGUuY29tJyk7XHJcbiAgICAgIGxvZ2luUmF0ZUxpbWl0ZXIucmVjb3JkRmFpbGVkQXR0ZW1wdCgndXNlcjJAZXhhbXBsZS5jb20nKTtcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IHJlc3VsdDEgPSBsb2dpblJhdGVMaW1pdGVyLmlzUmF0ZUxpbWl0ZWQoJ3VzZXIxQGV4YW1wbGUuY29tJyk7XHJcbiAgICAgIGNvbnN0IHJlc3VsdDIgPSBsb2dpblJhdGVMaW1pdGVyLmlzUmF0ZUxpbWl0ZWQoJ3VzZXIyQGV4YW1wbGUuY29tJyk7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QocmVzdWx0MS5hdHRlbXB0c0xlZnQpLnRvQmUoNCk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQyLmF0dGVtcHRzTGVmdCkudG9CZSg0KTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTtcclxuXHJcbiJdLCJuYW1lcyI6WyJkZXNjcmliZSIsIml0IiwicGFzc3dvcmQiLCJoYXNoIiwiaGFzaFBhc3N3b3JkIiwiZXhwZWN0IiwidG9CZURlZmluZWQiLCJ0b0JlIiwiaW5jbHVkZXMiLCJyZWplY3RzIiwidG9UaHJvdyIsImlzVmFsaWQiLCJ2ZXJpZnlQYXNzd29yZCIsInJlc3VsdCIsInZhbGlkYXRlUGFzc3dvcmRTdHJlbmd0aCIsIm1lc3NhZ2UiLCJ0b0NvbnRhaW4iLCJsb25nUGFzc3dvcmQiLCJyZXBlYXQiLCJpc1NlY3VyZUhhc2giLCJiZWZvcmVFYWNoIiwid2luZG93IiwibG9jYWxTdG9yYWdlIiwicmVtb3ZlSXRlbSIsImxvZ2luUmF0ZUxpbWl0ZXIiLCJhdHRlbXB0cyIsImNsZWFyIiwiaXNSYXRlTGltaXRlZCIsImlzTGltaXRlZCIsImF0dGVtcHRzTGVmdCIsInJlY29yZEZhaWxlZEF0dGVtcHQiLCJpIiwiY2xlYXJBdHRlbXB0cyIsInJlc3VsdDEiLCJyZXN1bHQyIl0sIm1hcHBpbmdzIjoiQUFBQTs7O0NBR0M7Ozs7a0NBUU07QUFFUCxvQ0FBb0M7QUFFcENBLFNBQVMscUJBQXFCO0lBQzVCQSxTQUFTLGdCQUFnQjtRQUN2QkMsR0FBRyx1Q0FBdUM7WUFDeEMsTUFBTUMsV0FBVztZQUNqQixNQUFNQyxPQUFPLE1BQU1DLElBQUFBLDhCQUFZLEVBQUNGO1lBRWhDRyxPQUFPRixNQUFNRyxXQUFXO1lBQ3hCRCxPQUFPLE9BQU9GLE1BQU1JLElBQUksQ0FBQztZQUN6QkYsT0FBT0YsS0FBS0ssUUFB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