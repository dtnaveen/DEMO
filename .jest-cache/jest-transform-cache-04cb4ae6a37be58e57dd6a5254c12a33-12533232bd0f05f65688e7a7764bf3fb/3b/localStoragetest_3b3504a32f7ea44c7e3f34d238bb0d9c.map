{"version":3,"sources":["D:\\Tech Vitta\\Apps\\DEMO\\__tests__\\lib\\localStorage.test.js"],"sourcesContent":["import {\r\n  getCurrentUser,\r\n  setCurrentUser,\r\n  getAllUsers,\r\n  getConversations,\r\n} from '@/lib/localStorage'\r\n\r\n// Mock localStorage\r\nconst localStorageMock = (() => {\r\n  let store = {}\r\n  return {\r\n    getItem: jest.fn((key) => store[key] || null),\r\n    setItem: jest.fn((key, value) => {\r\n      store[key] = value.toString()\r\n    }),\r\n    removeItem: jest.fn((key) => {\r\n      delete store[key]\r\n    }),\r\n    clear: jest.fn(() => {\r\n      store = {}\r\n    }),\r\n  }\r\n})()\r\n\r\nbeforeEach(() => {\r\n  Object.defineProperty(window, 'localStorage', {\r\n    value: localStorageMock,\r\n    writable: true,\r\n  })\r\n  localStorageMock.clear()\r\n})\r\n\r\ndescribe('localStorage functions', () => {\r\n  describe('getCurrentUser', () => {\r\n    it('returns null when no user is stored', () => {\r\n      expect(getCurrentUser()).toBeNull()\r\n    })\r\n\r\n    it('returns user when user is stored', () => {\r\n      const user = { id: '1', name: 'Test User' }\r\n      localStorageMock.setItem('currentUser', JSON.stringify(user))\r\n      expect(getCurrentUser()).toEqual(user)\r\n    })\r\n  })\r\n\r\n  describe('setCurrentUser', () => {\r\n    it('saves user to localStorage', () => {\r\n      const user = { id: '1', name: 'Test User' }\r\n      setCurrentUser(user)\r\n      expect(localStorageMock.setItem).toHaveBeenCalledWith(\r\n        'currentUser',\r\n        JSON.stringify(user)\r\n      )\r\n    })\r\n  })\r\n\r\n  describe('getAllUsers', () => {\r\n    it('returns empty array when no users are stored', () => {\r\n      expect(getAllUsers()).toEqual([])\r\n    })\r\n\r\n    it('returns users when users are stored', () => {\r\n      const users = [{ id: '1', name: 'User 1' }, { id: '2', name: 'User 2' }]\r\n      localStorageMock.setItem('allUsers', JSON.stringify(users))\r\n      expect(getAllUsers()).toEqual(users)\r\n    })\r\n  })\r\n})\r\n\r\n"],"names":["localStorageMock","store","getItem","jest","fn","key","setItem","value","toString","removeItem","clear","beforeEach","Object","defineProperty","window","writable","describe","it","expect","getCurrentUser","toBeNull","user","id","name","JSON","stringify","toEqual","setCurrentUser","toHaveBeenCalledWith","getAllUsers","users"],"mappings":";;;;8BAKO;AAEP,oBAAoB;AACpB,MAAMA,mBAAmB,AAAC,CAAA;IACxB,IAAIC,QAAQ,CAAC;IACb,OAAO;QACLC,SAASC,KAAKC,EAAE,CAAC,CAACC,MAAQJ,KAAK,CAACI,IAAI,IAAI;QACxCC,SAASH,KAAKC,EAAE,CAAC,CAACC,KAAKE;YACrBN,KAAK,CAACI,IAAI,GAAGE,MAAMC,QAAQ;QAC7B;QACAC,YAAYN,KAAKC,EAAE,CAAC,CAACC;YACnB,OAAOJ,KAAK,CAACI,IAAI;QACnB;QACAK,OAAOP,KAAKC,EAAE,CAAC;YACbH,QAAQ,CAAC;QACX;IACF;AACF,CAAA;AAEAU,WAAW;IACTC,OAAOC,cAAc,CAACC,QAAQ,gBAAgB;QAC5CP,OAAOP;QACPe,UAAU;IACZ;IACAf,iBAAiBU,KAAK;AACxB;AAEAM,SAAS,0BAA0B;IACjCA,SAAS,kBAAkB;QACzBC,GAAG,uCAAuC;YACxCC,OAAOC,IAAAA,4BAAc,KAAIC,QAAQ;QACnC;QAEAH,GAAG,oCAAoC;YACrC,MAAMI,OAAO;gBAAEC,IAAI;gBAAKC,MAAM;YAAY;YAC1CvB,iBAAiBM,OAAO,CAAC,eAAekB,KAAKC,SAAS,CAACJ;YACvDH,OAAOC,IAAAA,4BAAc,KAAIO,OAAO,CAACL;QACnC;IACF;IAEAL,SAAS,kBAAkB;QACzBC,GAAG,8BAA8B;YAC/B,MAAMI,OAAO;gBAAEC,IAAI;gBAAKC,MAAM;YAAY;YAC1CI,IAAAA,4BAAc,EAACN;YACfH,OAAOlB,iBAAiBM,OAAO,EAAEsB,oBAAoB,CACnD,eACAJ,KAAKC,SAAS,CAACJ;QAEnB;IACF;IAEAL,SAAS,eAAe;QACtBC,GAAG,gDAAgD;YACjDC,OAAOW,IAAAA,yBAAW,KAAIH,OAAO,CAAC,EAAE;QAClC;QAEAT,GAAG,uCAAuC;YACxC,MAAMa,QAAQ;gBAAC;oBAAER,IAAI;oBAAKC,MAAM;gBAAS;gBAAG;oBAAED,IAAI;oBAAKC,MAAM;gBAAS;aAAE;YACxEvB,iBAAiBM,OAAO,CAAC,YAAYkB,KAAKC,SAAS,CAACK;YACpDZ,OAAOW,IAAAA,yBAAW,KAAIH,OAAO,CAACI;QAChC;IACF;AACF"}